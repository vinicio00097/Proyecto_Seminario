(function(t){function e(e){for(var s,n,r=e[0],l=e[1],c=e[2],p=0,v=[];p<r.length;p++)n=r[p],i[n]&&v.push(i[n][0]),i[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);d&&d(e);while(v.length)v.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,r=1;r<a.length;r++){var l=a[r];0!==i[l]&&(s=!1)}s&&(o.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},i={app:0},o=[];function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"359b":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{attrs:{app:"",flat:"",color:"deep-orange"}},[a("v-app-bar-nav-icon",{on:{click:function(e){return t.$emit("openClose")}}}),a("v-toolbar-title",{staticClass:"headline"},[a("span",[t._v(t._s(this.$route.matched[0].name))])]),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("search")])],1),a("v-menu",{attrs:{origin:"center center",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{icon:""}},s),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}])},[a("v-list",t._l(t.$app_bar_actions,function(e){return a("v-list-item",{key:e.index,on:{click:function(){}}},[a("v-list-item-title",[t._v(t._s(e.title))])],1)}),1)],1)],1),a("v-row",{staticClass:"ma-0 pa-0",attrs:{justify:"center",align:"center"}},[a("p",{staticClass:"title"},[t._v("Inicio")])])],1)},i=[],o={methods:{}},n=o,r=a("2877"),l=a("6544"),c=a.n(l),d=a("7496"),p=a("40dc"),v=a("5bc1"),u=a("8336"),m=a("132d"),h=a("8860"),b=a("da13"),g=a("5d23"),_=a("e449"),w=a("0fd9"),f=a("2fa4"),D=a("2a7f"),k=Object(r["a"])(n,s,i,!1,null,null,null),C=k.exports;c()(k,{VApp:d["a"],VAppBar:p["a"],VAppBarNavIcon:v["a"],VBtn:u["a"],VIcon:m["a"],VList:h["a"],VListItem:b["a"],VListItemTitle:g["c"],VMenu:_["a"],VRow:w["a"],VSpacer:f["a"],VToolbarTitle:D["a"]});var S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{attrs:{app:"",flat:"",color:"deep-orange"}},[a("v-app-bar-nav-icon",{on:{click:function(e){return t.$emit("openClose")}}}),a("v-toolbar-title",{staticClass:"headline"},[a("span",[t._v(t._s(this.$route.matched[0].name))])]),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("search")])],1),a("v-menu",{attrs:{origin:"center center",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{icon:""}},s),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}])},[a("v-list",t._l(t.$app_bar_actions,function(e){return a("v-list-item",{key:e.index,on:{click:function(){}}},[a("v-list-item-title",[t._v(t._s(e.title))])],1)}),1)],1)],1),t.isLoaded?t._e():a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{align:"center"}},[a("v-progress-circular",{attrs:{size:70,width:7,color:"deep-orange",indeterminate:""}})],1)],1),t.isLoaded?a("v-row",{staticClass:"ma-0"},[a("v-dialog",{attrs:{"max-width":"325",persistent:"add"==t.accion},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{loading:t.loaderCard}},["delete"==t.accion?a("v-card-title",{staticClass:"headline"},[t._v("Confirmación")]):t._e(),"add"==t.accion?a("v-card-title",{staticClass:"headline"},[t._v("Nuevo usuario")]):t._e(),"edit"==t.accion?a("v-card-title",{staticClass:"headline"},[t._v("Edición usuario")]):t._e(),"delete"==t.accion?a("v-card-text",[t._v('\n                Desea eliminar el usuario "'+t._s(t.selectedUser.usuarioEmail)+'"?\n                ')]):t._e(),"add"==t.accion||"edit"==t.accion?a("v-card-text",[a("v-form",{ref:"userAddForm"},[a("v-text-field",{attrs:{outlined:"",color:"deep-orange",counter:50,rules:t.userForm.namesRules,label:"Nombres",autocomplete:"off",required:""},model:{value:t.userForm.names,callback:function(e){t.$set(t.userForm,"names",e)},expression:"userForm.names"}}),a("v-text-field",{attrs:{outlined:"",color:"deep-orange",counter:50,rules:t.userForm.lastNamesRules,label:"Apellidos",autocomplete:"off",required:""},model:{value:t.userForm.lastNames,callback:function(e){t.$set(t.userForm,"lastNames",e)},expression:"userForm.lastNames"}}),a("v-text-field",{attrs:{outlined:"",color:"deep-orange",rules:t.userForm.emailRules,label:"Correo eletrónico",autocomplete:"off",required:""},model:{value:t.userForm.email,callback:function(e){t.$set(t.userForm,"email",e)},expression:"userForm.email"}}),a("v-select",{attrs:{"item-color":"deep-orange lighten-2",outlined:"",color:"deep-orange",items:t.ranges,"item-text":"nombre","item-value":"id",rules:t.userForm.selectedRangeRules,label:"Rangos",autocomplete:"off",required:"","return-object":""},model:{value:t.userForm.selectedRange,callback:function(e){t.$set(t.userForm,"selectedRange",e)},expression:"userForm.selectedRange"}})],1)],1):t._e(),"add"==t.accion?a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:""},on:{click:function(e){t.dialog=!1,t.$refs.userAddForm.reset()}}},[t._v("\n                        Cancelar\n                    ")]),a("v-btn",{attrs:{text:""},on:{click:function(e){return t.addUser()}}},[t._v("\n                        Guardar\n                    ")])],1):t._e(),"edit"==t.accion?a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:""},on:{click:function(e){t.dialog=!1,t.$refs.userAddForm.reset()}}},[t._v("\n                        Cancelar\n                    ")]),a("v-btn",{attrs:{text:""},on:{click:function(e){return t.updateUser()}}},[t._v("\n                        Guardar\n                    ")])],1):t._e(),"delete"==t.accion?a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n                        No\n                    ")]),a("v-btn",{attrs:{text:""},on:{click:function(e){return t.deleteUser()}}},[t._v("\n                        Si\n                    ")])],1):t._e()],1)],1),t._l(t.usersData,function(e){return e.idUsuario!=t.session_claims.user_id?a("v-col",{key:e.idUsuario,attrs:{xs:"12",sm:"6",md:"4",lg:"3",xl:"2",cols:"12"}},[a("v-card",{staticClass:"mx-auto rounded-0",attrs:{"max-width":"400",hover:""}},[a("v-row",{staticClass:"ma-0"},[a("v-col",{staticClass:"pa-0",attrs:{lg:"9",cols:"9"}},[a("v-card-title",[t._v(t._s(e.usuarioEmail))])],1),a("v-col",{staticClass:"pa-0"},[a("v-row",{staticClass:"ma-0"},[a("v-spacer"),a("v-btn",{attrs:{icon:"",large:""},on:{click:function(a){return t.cardActionActivation("delete",e)}}},[a("v-icon",[t._v("\n                                clear\n                            ")])],1)],1)],1)],1),a("v-card-text",[a("div",{staticClass:"subtitle-1 text--primary"},[t._v("Nombre")]),t._v("\n                    "+t._s(e.nombres)+" "+t._s(e.apellidos)+"\n                ")]),a("v-list-item",[a("v-list-item-icon",[a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("verified_user")])],1)],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Rango")]),a("v-list-item-subtitle",[t._v(t._s("1"==e.rango?"Administrador":"Estándar"))])],1)],1),a("v-card-actions",[a("v-layout",{staticClass:"ma-0",attrs:{row:"","justify-center":""}},[a("v-btn",{attrs:{icon:""},on:{click:function(a){return t.cardActionActivation("edit",e)}}},[a("v-icon",[t._v("edit")])],1)],1)],1)],1)],1):t._e()})],2):t._e(),a("v-fab-transition",[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.isLoaded,expression:"isLoaded"}],attrs:{color:"deep-orange",dark:"",fixed:"",large:"",bottom:"",right:"",fab:""},on:{click:function(e){return t.cardActionActivation("add")}}},[a("v-icon",[t._v("add")])],1)],1),a("v-snackbar",{attrs:{color:t.usersSnackbar.style,timeout:t.usersSnackbar.timeout},model:{value:t.usersSnackbar.active,callback:function(e){t.$set(t.usersSnackbar,"active",e)},expression:"usersSnackbar.active"}},[t._v("\n    "+t._s(t.usersSnackbar.text)+"\n        "),a("v-btn",{attrs:{text:""},on:{click:function(e){t.usersSnackbar.active=!1}}},[t._v("\n        Cerrar\n        ")])],1)],1)},x=[],y={data:()=>({session_claims:Object,usersData:[],ranges:[{id:"1",nombre:"Administrativo"},{id:"2",nombre:"Estándar"}],selectedUser:Object,isLoaded:!1,dialog:!1,loaderCard:null,accion:String,usersSnackbar:{active:!1,text:String,timeout:6e3,style:String},userForm:{names:"",namesRules:[t=>!!t||"Nombres es requerido",t=>t&&t.length<=50||"Nombres debe ser menor o igual a 50"],lastNames:"",lastNamesRules:[t=>!!t||"Apellidos es requerido",t=>t&&t.length<=50||"Apellidos debe ser menor o igual a 50"],email:"",emailRules:[t=>!!t||"Correo electrónico es requerido",t=>/.+@.+\..+/.test(t)||"Correo electrónico debe ser valido"],selectedRange:"",selectedRangeRules:[t=>!!t||"Rango es requerido"]}}),methods:{async loadUsers(){await this.$axios.get(this.$webServicesBaseURL+"Home/Usuarios",{withCredentials:!0}).then(t=>{200==t.status&&31==t.data.code&&(this.usersData=t.data.data)})},async deleteUser(){this.loaderCard="deep-orange",await this.$axios.delete(this.$webServicesBaseURL+"Home/Usuarios/Delete/"+this.selectedUser.idUsuario,{withCredentials:!0}).then(t=>{200==t.status&&39==t.data.code&&(this.usersData.splice(this.usersData.indexOf(this.selectedUser),1),this.showSnackbar(this.selectedUser.nombres+" "+this.selectedUser.apellidos,"success",2))}).catch(t=>{null!=t.response&&404==t.response.status&&null!=t.response.data?(30==t.response.data.code&&this.usersData.splice(this.usersData.indexOf(this.selectedUser),1),this.showSnackbar(t.response.data.message,"error",1e3)):this.showSnackbar(t,"error",1e3)}),this.loaderCard=!1,this.dialog=!1},async addUser(){if(this.$refs.userAddForm.validate()){let t={nombres:this.userForm.names,apellidos:this.userForm.lastNames,usuarioEmail:this.userForm.email,rango:this.userForm.selectedRange.id};this.loaderCard="deep-orange",await this.$axios.post(this.$webServicesBaseURL+"Home/Usuarios/Create",t,{withCredentials:!0}).then(e=>{200==e.status&&32==e.data.code&&(t.idUsuario=e.data.data.idUsuario,this.usersData.push(t),this.$refs.userAddForm.reset(),this.showSnackbar(t.nombres+" "+t.apellidos,"success",1))}).catch(t=>{null!=t.response&&404==t.response.status&&null!=t.response.data?this.showSnackbar(t.response.data.message,"error",1e3):this.showSnackbar(t,"error",1e3)}),this.loaderCard=!1,this.dialog=!1}},async updateUser(){if(this.$refs.userAddForm.validate()){let t={idUsuario:this.selectedUser.idUsuario,nombres:this.userForm.names,apellidos:this.userForm.lastNames,usuarioEmail:this.userForm.email,rango:this.userForm.selectedRange.id};this.loaderCard="deep-orange",await this.$axios.put(this.$webServicesBaseURL+"Home/Usuarios/Edit/"+t.idUsuario,t,{withCredentials:!0}).then(e=>{200==e.status&&33==e.data.code&&(this.selectedUser.nombres=t.nombres,this.selectedUser.apellidos=t.apellidos,this.selectedUser.usuarioEmail=t.usuarioEmail,this.selectedUser.rango=t.rango,this.$refs.userAddForm.reset(),this.showSnackbar(this.selectedUser.nombres+" "+this.selectedUser.apellidos,"success",3))}).catch(t=>{null!=t.response&&404==t.response.status&&null!=t.response.data?(30==t.response.data.code&&this.usersData.splice(this.usersData.indexOf(this.selectedUser),1),this.showSnackbar(t.response.data.message,"error",1e3)):this.showSnackbar(t,"error",1e3)}),this.loaderCard=!1,this.dialog=!1}},async initializeAll(){await this.loadUsers(),this.isLoaded=!0},cardActionActivation(t,e){this.accion=t,this.selectedUser=e,"edit"==t&&(this.userForm.names=this.selectedUser.nombres,this.userForm.lastNames=this.selectedUser.apellidos,this.userForm.email=this.selectedUser.usuarioEmail,this.userForm.selectedRange=this.ranges.find(t=>t.id==this.selectedUser.rango)),this.dialog=!0},showSnackbar(t,e,a){switch(this.usersSnackbar.active=!1,a){case 1:this.usersSnackbar.text='Usuario "'+t+'" agregado.';break;case 2:this.usersSnackbar.text='Usuario "'+t+'" eliminado.';break;case 3:this.usersSnackbar.text='Usuario "'+t+'" actualizado.';break}this.usersSnackbar.active=!0,this.usersSnackbar.style=e}},created(){this.initializeAll()},mounted(){this.session_claims=JSON.parse(atob(this.$cookies.get("session_token").split(".")[1]))}},V=y,T=a("b0af"),I=a("99d9"),P=a("62ad"),F=a("169a"),$=a("0789"),A=a("4bd4"),L=a("a722"),N=a("34c3"),R=a("490a"),U=a("b974"),O=a("2db4"),j=a("8654"),E=Object(r["a"])(V,S,x,!1,null,null,null),B=E.exports;c()(E,{VApp:d["a"],VAppBar:p["a"],VAppBarNavIcon:v["a"],VBtn:u["a"],VCard:T["a"],VCardActions:I["a"],VCardText:I["b"],VCardTitle:I["c"],VCol:P["a"],VDialog:F["a"],VFabTransition:$["c"],VForm:A["a"],VIcon:m["a"],VLayout:L["a"],VList:h["a"],VListItem:b["a"],VListItemContent:g["a"],VListItemIcon:N["a"],VListItemSubtitle:g["b"],VListItemTitle:g["c"],VMenu:_["a"],VProgressCircular:R["a"],VRow:w["a"],VSelect:U["a"],VSnackbar:O["a"],VSpacer:f["a"],VTextField:j["a"],VToolbarTitle:D["a"]});var z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{attrs:{app:"",flat:"",color:"deep-orange"}},[a("v-app-bar-nav-icon",{on:{click:function(e){return t.$emit("openClose")}}}),a("v-toolbar-title",{staticClass:"headline"},[a("span",[t._v(t._s(this.$route.matched[0].name))])]),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("search")])],1),a("v-menu",{attrs:{origin:"center center",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{icon:""}},s),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}])},[a("v-list",t._l(t.$app_bar_actions,function(e){return a("v-list-item",{key:e.index,on:{click:function(){}}},[a("v-list-item-title",[t._v(t._s(e.title))])],1)}),1)],1)],1),t.isLoaded?t._e():a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{align:"center"}},[a("v-progress-circular",{attrs:{size:70,width:7,color:"deep-orange",indeterminate:""}})],1)],1),t.isLoaded?a("v-row",{staticClass:"ma-0"},[a("v-dialog",{attrs:{scrollable:"","max-width":"450",persistent:""},model:{value:t.newTemplateDialog,callback:function(e){t.newTemplateDialog=e},expression:"newTemplateDialog"}},[a("v-card",{attrs:{loading:t.loaderCard}},[a("v-card-title",{staticClass:"headline"},[t._v("Nueva plantilla")]),a("v-card-text",[a("div",{staticClass:"title text--secondary"},[t._v("Información de plantilla")]),a("v-row",{staticClass:"pa-1"}),a("v-form",{ref:"newTemplateForm"},[a("v-text-field",{attrs:{outlined:"",color:"deep-orange",counter:50,rules:t.newTemplate.nombreRules,label:"Nombre",autocomplete:"off",required:""},model:{value:t.newTemplate.nombre,callback:function(e){t.$set(t.newTemplate,"nombre",e)},expression:"newTemplate.nombre"}}),a("v-text-field",{attrs:{outlined:"",color:"deep-orange",counter:50,rules:t.newTemplate.descripcionRules,label:"Descripción",autocomplete:"off",required:""},model:{value:t.newTemplate.descripcion,callback:function(e){t.$set(t.newTemplate,"descripcion",e)},expression:"newTemplate.descripcion"}})],1),a("v-divider"),a("div",{staticClass:"title text--secondary"},[t._v("Campos de información")]),a("v-row",{staticClass:"pa-1"}),a("v-dialog",{attrs:{"max-width":"300",scrollable:""},model:{value:t.newFieldDialog,callback:function(e){t.newFieldDialog=e},expression:"newFieldDialog"}},[a("v-card",["add"==t.newFieldDialogAction?a("v-card-title",{staticClass:"headline"},[t._v("Nuevo campo")]):t._e(),"edit"==t.newFieldDialogAction?a("v-card-title",{staticClass:"headline"},[t._v("Edición campo")]):t._e(),"delete"==t.newFieldDialogAction?a("v-card-title",{staticClass:"headline"},[t._v("Confirmación")]):t._e(),"delete"!=t.newFieldDialogAction?a("v-card-text",[a("v-form",{ref:"newFieldForm"},[a("v-text-field",{attrs:{solo:"",color:"deep-orange",counter:50,rules:t.newField.nombreCampoRules,label:"Nombre de campo",autocomplete:"off",required:""},model:{value:t.newField.nombreCampo,callback:function(e){t.$set(t.newField,"nombreCampo",e)},expression:"newField.nombreCampo"}}),a("v-select",{attrs:{solo:"","item-color":"deep-orange lighten-2",color:"deep-orange",items:t.fieldTypeData,"item-text":"nombre","item-value":"idTipoDato",rules:t.newField.tipoDatoNavigationRules,label:"Tipo de campo",autocomplete:"off",required:"","return-object":""},model:{value:t.newField.tipoDatoNavigation,callback:function(e){t.$set(t.newField,"tipoDatoNavigation",e)},expression:"newField.tipoDatoNavigation"}})],1)],1):t._e(),"delete"==t.newFieldDialogAction?a("v-card-text",[t._v('\n                                Desea eliminar el campo "'+t._s(t.selectedField.nombreCampo)+'"?\n                            ')]):t._e(),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),"add"==t.newFieldDialogAction?a("v-btn",{attrs:{text:""},on:{click:function(e){return t.addFields()}}},[t._v("\n                                    Agregar\n                                ")]):t._e(),"edit"==t.newFieldDialogAction?a("v-btn",{attrs:{text:""},on:{click:function(e){return t.updateField()}}},[t._v("\n                                    Guardar\n                                ")]):t._e(),"delete"==t.newFieldDialogAction?a("v-btn",{attrs:{text:""},on:{click:function(e){return t.deleteField(t.selectedField)}}},[t._v("\n                                    Eliminar\n                                ")]):t._e()],1)],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-badge",{attrs:{color:"teal"},scopedSlots:t._u([{key:"badge",fn:function(){return[t._v(t._s(t.newTemplate.Campos.length))]},proxy:!0}],null,!1,2716843942)},[a("v-btn",{attrs:{outlined:"",rounded:""},on:{click:function(e){return t.openFieldDialog("add")}}},[t._v("Agregar campo\n                            ")])],1)],1),a("v-row",{staticClass:"pa-2"}),a("div",{staticClass:"scrolling-wrapper"},[t._l(t.newTemplate.Campos,function(e){return a("div",{key:e.idPlantillaCampo,staticClass:"card"},[a("v-card",{staticClass:"mx-auto flex-row",attrs:{width:"300",hover:""}},[a("v-row",{staticClass:"ma-0"},[a("v-col",{staticClass:"pa-0",attrs:{lg:"9",cols:"9"}},[a("v-card-title",[t._v(t._s(e.nombreCampo))])],1),a("v-col",{staticClass:"pa-0"},[a("v-row",{staticClass:"ma-0"},[a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(a){return t.openFieldDialog("delete",e)}}},[a("v-icon",[t._v("\n                                                    clear\n                                                ")])],1)],1)],1)],1),a("v-card-text",[a("div",{staticClass:"subtitle-1 text--primary"},[t._v("Tipo de campo")]),t._v("\n                                    "+t._s(e.tipoDatoNavigation.nombre)+"\n                                ")]),a("v-card-actions",[a("v-layout",{staticClass:"ma-0",attrs:{row:"","justify-center":""}},[a("v-btn",{attrs:{icon:""},on:{click:function(a){return t.openFieldDialog("edit",e)}}},[a("v-icon",[t._v("edit")])],1)],1)],1)],1)],1)}),a("div",{staticClass:"card"})],2),a("v-row",{staticClass:"pa-2"}),a("v-divider"),a("div",{staticClass:"title text--secondary"},[t._v("Pasos")]),a("v-row",{staticClass:"pa-1"}),a("v-dialog",{attrs:{"max-width":"325",scrollable:""},model:{value:t.newStepDialog,callback:function(e){t.newStepDialog=e},expression:"newStepDialog"}},[a("v-card",{attrs:{loading:t.loaderCard}},["add"==t.newStepDialogAction?a("v-card-title",{staticClass:"headline"},[t._v("Nuevo paso")]):t._e(),"edit"==t.newStepDialogAction?a("v-card-title",{staticClass:"headline"},[t._v("Edición paso")]):t._e(),"delete"==t.newStepDialogAction?a("v-card-title",{staticClass:"headline"},[t._v("Confirmación")]):t._e(),"delete"!=t.newStepDialogAction?a("v-card-text",[a("v-form",{ref:"newStepForm"},[a("v-text-field",{attrs:{solo:"",color:"deep-orange",counter:50,rules:t.newStep.nombreRules,label:"Nombre paso",autocomplete:"off",required:""},model:{value:t.newStep.nombre,callback:function(e){t.$set(t.newStep,"nombre",e)},expression:"newStep.nombre"}}),a("v-text-field",{attrs:{solo:"",color:"deep-orange",counter:50,rules:t.newStep.descripcionRules,label:"Descripción paso",autocomplete:"off",required:""},model:{value:t.newStep.descripcion,callback:function(e){t.$set(t.newStep,"descripcion",e)},expression:"newStep.descripcion"}}),a("div",{staticClass:"subtitle-1"},[t._v("Datos del paso")]),a("v-row",{staticClass:"pa-1"}),a("v-select",{attrs:{"item-color":"deep-orange lighten-2",solo:"",color:"deep-orange",items:t.usersData,label:"Seleccione usuarios","item-text":"nombres","item-value":"idUsuario",multiple:"",chips:"","deletable-chips":"","return-object":""},model:{value:t.newStep.usuarios,callback:function(e){t.$set(t.newStep,"usuarios",e)},expression:"newStep.usuarios"}}),a("v-select",{attrs:{"item-color":"deep-orange lighten-2",solo:"",color:"deep-orange",items:JSON.parse(JSON.stringify(t.newTemplate.Campos)),label:"Seleccione campos","item-text":"nombreCampo","item-value":"idInstanciaPlantillaDato",multiple:"",chips:"","deletable-chips":"","return-object":""},model:{value:t.newStep.datos_pasos,callback:function(e){t.$set(t.newStep,"datos_pasos",e)},expression:"newStep.datos_pasos"}}),a("div",{staticClass:"body-2 text--secondary",attrs:{align:"center"}},[t._v("\n                                    Seleccione los campos que no serán editables de la lista de abajo\n                                ")]),a("v-select",{attrs:{"item-color":"deep-orange lighten-2",solo:"",color:"deep-orange",items:t.newStep.datos_pasos,label:"Seleccione campos","item-text":"nombreCampo","item-value":"idInstanciaPlantillaDato",multiple:"",chips:"","deletable-chips":"","return-object":""},model:{value:t.newStep.read_only_datos,callback:function(e){t.$set(t.newStep,"read_only_datos",e)},expression:"newStep.read_only_datos"}})],1)],1):t._e(),"delete"==t.newStepDialogAction?a("v-card-text",[t._v('\n                                Desea eliminar el paso "'+t._s(t.selectedStep.nombre)+'"?\n                            ')]):t._e(),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),"add"==t.newStepDialogAction?a("v-btn",{attrs:{text:""},on:{click:function(e){return t.addSteps()}}},[t._v("\n                                    Agregar\n                                ")]):t._e(),"edit"==t.newStepDialogAction?a("v-btn",{attrs:{text:""},on:{click:function(e){return t.updateStep()}}},[t._v("\n                                    Guardar\n                                ")]):t._e(),"delete"==t.newStepDialogAction?a("v-btn",{attrs:{text:""},on:{click:function(e){return t.deleteStep(t.selectedStep)}}},[t._v("\n                                    Eliminar\n                                ")]):t._e()],1)],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-badge",{attrs:{color:"teal"},scopedSlots:t._u([{key:"badge",fn:function(){return[t._v(t._s(t.newTemplate.Pasos.length))]},proxy:!0}],null,!1,3690009467)},[a("v-btn",{attrs:{outlined:"",rounded:""},on:{click:function(e){return t.openStepDialog("add")}}},[t._v("Agregar paso\n                                ")])],1)],1),a("v-row",{staticClass:"pa-2"}),a("div",{staticClass:"scrolling-wrapper"},[t._l(t.newTemplate.Pasos,function(e){return a("div",{key:e.idPlantillaPaso,staticClass:"card"},[a("v-card",{staticClass:"mx-auto flex-row",attrs:{width:"300",hover:""}},[a("v-row",{staticClass:"ma-0"},[a("v-col",{staticClass:"pa-0",attrs:{lg:"9",cols:"9"}},[a("v-card-title",[t._v(t._s(e.nombre))])],1),a("v-col",{staticClass:"pa-0"},[a("v-row",{staticClass:"ma-0"},[a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(a){return t.openStepDialog("delete",e)}}},[a("v-icon",[t._v("\n                                                    clear\n                                                ")])],1)],1)],1)],1),a("v-card-text",[a("div",{staticClass:"subtitle-1 text--primary"},[t._v("Descripción")]),t._v("\n                                        "+t._s(e.descripcion)+"\n                                    ")]),a("v-list-item",[a("v-list-item-icon",[a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("people")])],1)],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Cant. de usuarios")]),a("v-list-item-subtitle",[t._v(t._s(e.usuarios.length))])],1)],1),a("v-list-item",[a("v-list-item-icon",[a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("list")])],1)],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Cant. de campos de info.")]),a("v-list-item-subtitle",[t._v(t._s(e.datos_pasos.length))])],1)],1),a("v-card-actions",[a("v-layout",{staticClass:"ma-0",attrs:{row:"","justify-center":""}},[a("v-btn",{attrs:{icon:""},on:{click:function(a){return t.openStepDialog("edit",e)}}},[a("v-icon",[t._v("edit")])],1)],1)],1)],1)],1)}),a("div",{staticClass:"card"})],2)],1),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:""},on:{click:function(e){return t.onCancelDialog()}}},[t._v("\n                        Cancelar\n                    ")]),a("v-btn",{attrs:{text:""},on:{click:function(e){return t.addTemplate()}}},[t._v("\n                        Guardar\n                    ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"325"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{loading:t.loaderCard}},[a("v-card-title",{staticClass:"headline"},[t._v("Confirmación")]),"createProcess"==t.actionDialog?a("v-card-text",[t._v('\n                    Desea crear un proceso de la plantilla "'+t._s(t.selectedTemplate.nombre)+'"?\n                ')]):t._e(),"createStartProcess"==t.actionDialog?a("v-card-text",[t._v('\n                    Desea crear e inciar un proceso de la plantilla "'+t._s(t.selectedTemplate.nombre)+'"?\n                ')]):t._e(),"deleteTemplate"==t.actionDialog?a("v-card-text",[t._v('\n                    Desea eliminar la plantilla "'+t._s(t.selectedTemplate.nombre)+'"?\n                ')]):t._e(),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n                    No\n                ")]),"createProcess"==t.actionDialog||"createStartProcess"==t.actionDialog?a("v-btn",{attrs:{text:""},on:{click:function(){"createProcess"==t.actionDialog?t.crear_proceso(t.selectedTemplate):t.fieldsProcessDialog=!0,t.dialog=!1}}},[t._v("\n                    Si\n                ")]):t._e(),"deleteTemplate"==t.actionDialog?a("v-btn",{attrs:{text:""},on:{click:function(e){return t.deleteTemplate(t.selectedTemplate)}}},[t._v("\n                    Si\n                ")]):t._e()],1)],1)],1),a("v-dialog",{attrs:{scrollable:"","max-width":"350",persistent:!0},model:{value:t.fieldsProcessDialog,callback:function(e){t.fieldsProcessDialog=e},expression:"fieldsProcessDialog"}},[a("v-card",{attrs:{loading:t.loaderCard}},[a("v-card-title",{staticClass:"headline"},[t._v("Inicio de proceso")]),a("v-card-text",[a("div",{staticClass:"title text--secondary"},[t._v("Información de proceso")]),a("v-row",{staticClass:"pa-1"}),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v("Nombre proceso")]),a("v-spacer"),a("v-list-item-subtitle",[t._v(t._s(t.selectedTemplate.nombre))])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v("Descripción")]),a("v-spacer"),a("v-list-item-subtitle",[t._v(t._s(t.selectedTemplate.descripcion))])],1)],1),a("v-form",{ref:"processInstanceForm"},[a("v-divider"),a("div",{staticClass:"title text--secondary"},[t._v("Campos de información")]),a("v-row",{staticClass:"pa-1"}),a("v-list",t._l(t.selectedTemplate.campos,function(e){return a("v-list-item",{key:e.idPlantillaDato,staticClass:"pa-0"},[1==e.tipoDato?a("v-text-field",{attrs:{type:"text",outlined:"",color:"deep-orange",counter:50,label:e.nombreCampo,autocomplete:"off",required:""},model:{value:e.datoString,callback:function(a){t.$set(e,"datoString",a)},expression:"campo.datoString"}}):t._e(),2==e.tipoDato?a("v-text-field",{attrs:{type:"number",outlined:"",color:"deep-orange",counter:50,label:e.nombreCampo,autocomplete:"off",required:""},model:{value:e.datoInteger,callback:function(a){t.$set(e,"datoInteger",a)},expression:"campo.datoInteger"}}):t._e(),3==e.tipoDato?a("v-dialog",{ref:"inputDateDialog",refInFor:!0,attrs:{"return-value":e.datoDate,persistent:"","full-width":"",width:"290px"},on:{"update:returnValue":function(a){return t.$set(e,"datoDate",a)},"update:return-value":function(a){return t.$set(e,"datoDate",a)}},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on;return[a("v-text-field",t._g({attrs:{solo:"",label:e.nombreCampo,readonly:""},model:{value:e.datoDate,callback:function(a){t.$set(e,"datoDate",a)},expression:"campo.datoDate"}},i))]}}],null,!0),model:{value:t.inputDateDialog,callback:function(e){t.inputDateDialog=e},expression:"inputDateDialog"}},[a("v-date-picker",{attrs:{color:"dark"},model:{value:e.datoDate,callback:function(a){t.$set(e,"datoDate",a)},expression:"campo.datoDate"}},[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:""},on:{click:function(e){t.inputDateDialog=!1}}},[t._v("Cancel")]),a("v-btn",{attrs:{text:""},on:{click:function(){t.$refs.inputDateDialog[0].save(e.datoDate)}}},[t._v("OK")])],1)],1):t._e()],1)}),1)],1)],1),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:""},on:{click:function(e){t.fieldsProcessDialog=!1}}},[t._v("\n                        Cancelar\n                    ")]),a("v-btn",{attrs:{text:""},on:{click:function(e){return t.doCreateStartProcess(t.selectedTemplate)}}},[t._v("\n                        Crear e iniciar\n                    ")])],1)],1)],1),t._l(t.templatesData,function(e){return a("v-col",{key:e.idPlantilla,attrs:{xs:"12",sm:"6",md:"4",lg:"3",xl:"2",cols:"12"}},[a("v-card",{staticClass:"mx-auto rounded-5",attrs:{"max-width":"400",hover:""}},[a("v-row",{staticClass:"ma-0"},[a("v-col",{staticClass:"pa-0",attrs:{lg:"9",cols:"9"}},[a("v-card-title",[t._v(t._s(e.nombre))])],1),a("v-col",{staticClass:"pa-0"},[a("v-row",{staticClass:"ma-0"},[a("v-spacer"),a("v-btn",{attrs:{icon:"",large:""},on:{click:function(a){t.dialog=!0,t.selectedTemplate=e,t.actionDialog="deleteTemplate"}}},[a("v-icon",[t._v("\n                                clear\n                            ")])],1)],1)],1)],1),a("v-card-text",[a("div",{staticClass:"subtitle-1 text--primary"},[t._v("Descripción")]),t._v("\n                    "+t._s(e.descripcion)+"\n                ")]),a("v-list-item",[a("v-list-item-icon",[a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("linear_scale")])],1)],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Cant. de pasos")]),a("v-list-item-subtitle",[t._v(t._s(e.pasos.length))])],1)],1),a("v-list-item",[a("v-list-item-icon",[a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("list")])],1)],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Cant. de campos de info.")]),a("v-list-item-subtitle",[t._v(t._s(e.campos.length))])],1)],1),a("v-card-actions",[a("v-layout",{staticClass:"ma-0",attrs:{row:""}},[a("v-menu",{attrs:{origin:"center center",transition:"fade-transition","offset-x":"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{icon:""}},s),[a("v-icon",[t._v("more_horiz")])],1)]}}],null,!0)},[a("v-list",[a("v-list-item",{on:{click:function(a){return t.createProcessDialog(e)}}},[a("v-list-item-title",[t._v("Crear")])],1),a("v-list-item",{on:{click:function(a){return t.createStartProcessDialog(e)}}},[a("v-list-item-title",[t._v("Crear e iniciar")])],1)],1)],1),a("v-divider",{staticClass:"mx-1 transparent",attrs:{vertical:""}}),a("v-btn",{attrs:{icon:""},on:{click:function(a){return t.goDetails(e,"edit")}}},[a("v-icon",[t._v("edit")])],1),a("v-btn",{attrs:{icon:""},on:{click:function(a){return t.goDetails(e,"see")}}},[a("v-icon",[t._v("visibility")])],1)],1)],1)],1)],1)})],2):t._e(),a("router-view",{attrs:{readOnly:t.readOnlyDetails},on:{close:t.updateModifiedTemplate}}),a("v-fab-transition",[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.isLoaded,expression:"isLoaded"}],attrs:{color:"deep-orange",dark:"",fixed:"",large:"",bottom:"",right:"",fab:""},on:{click:function(e){t.newTemplateDialog=!0}}},[a("v-icon",[t._v("add")])],1)],1),a("v-snackbar",{attrs:{color:t.templatesSnackbar.style,timeout:t.templatesSnackbar.timeout},model:{value:t.templatesSnackbar.active,callback:function(e){t.$set(t.templatesSnackbar,"active",e)},expression:"templatesSnackbar.active"}},[t._v("\n    "+t._s(t.templatesSnackbar.text)+"\n        "),a("v-btn",{attrs:{text:""},on:{click:function(e){t.templatesSnackbar.active=!1}}},[t._v("\n        Cerrar\n        ")])],1)],1)},q=[],H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"",fullscreen:"","hide-overlay":"",transition:"scale-transition"},on:{"click:outside":function(e){return t.hola()}},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[a("v-card",[a("v-app",[a("v-app-bar",{attrs:{color:"deep-orange",flat:"",fixed:""}},[a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.closeActivity()}}},[a("v-icon",[t._v("arrow_back")])],1),a("v-toolbar-title",{staticClass:"headline"},[t._v("Plantilla")]),a("div",{staticClass:"flex-grow-1"})],1),t.isLoaded?t._e():a("div",{staticClass:"body"},[t.isLoaded?t._e():a("v-row",{staticClass:"pa-0 ma-0",attrs:{align:"center"}},[a("v-col",{attrs:{align:"center"}},[a("v-progress-circular",{attrs:{size:70,width:7,color:"deep-orange",indeterminate:""}})],1)],1)],1),t.isLoaded?a("div",{staticClass:"body2"},[a("v-dialog",{attrs:{width:"300"},model:{value:t.editInfoTemplateDialog,callback:function(e){t.editInfoTemplateDialog=e},expression:"editInfoTemplateDialog"}},[a("v-card",{attrs:{loading:t.confirmSaveDialogLoader}},[a("v-card-title",{staticClass:"headline"},[t._v("\n              Edición de plantilla\n            ")]),a("v-card-text",[a("v-row",{staticClass:"pa-2"}),a("v-form",{ref:"infoTemplate"},[a("v-text-field",{attrs:{outlined:"",color:"deep-orange",counter:50,rules:t.newTemplate.nombreRules,label:"Nombre",autocomplete:"off",required:""},model:{value:t.newTemplate.nombre,callback:function(e){t.$set(t.newTemplate,"nombre",e)},expression:"newTemplate.nombre"}}),a("v-text-field",{attrs:{outlined:"",color:"deep-orange",counter:50,rules:t.newTemplate.descripcionRules,label:"Descripción",autocomplete:"off",required:""},model:{value:t.newTemplate.descripcion,callback:function(e){t.$set(t.newTemplate,"descripcion",e)},expression:"newTemplate.descripcion"}})],1)],1),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:""},on:{click:function(e){t.editInfoTemplateDialog=!1}}},[t._v("\n                Cancelar\n              ")]),a("v-btn",{attrs:{text:""},on:{click:function(e){return t.saveChangeInfo()}}},[t._v("\n                Guardar\n              ")])],1)],1)],1),a("v-row",{staticClass:"pa-5",attrs:{align:"center"}},[a("div",{staticClass:"title text--secondary"},[t._v("Información de plantilla")]),a("div",{staticClass:"pl-2"}),t.readOnly?t._e():a("v-btn",{attrs:{icon:"","x-large":""},on:{click:function(e){return t.openEditInfoDialog()}}},[a("v-icon",[t._v("edit")])],1)],1),a("v-row",{staticClass:"pl-5 pr-5 pt-5",attrs:{justify:"center"}},[a("div",{staticClass:"headline text",attrs:{align:"center"}},[t._v(t._s(t.templateData.nombre))]),a("div",{staticClass:"pl-2"})]),a("v-row",{staticClass:"pa-5",attrs:{justify:"center"}},[a("div",{staticClass:"headline  text--secondary",attrs:{align:"center"}},[t._v(t._s(t.templateData.descripcion))]),a("div",{staticClass:"pl-2"})]),a("v-divider",{staticClass:"mx-4"}),a("v-row",{staticClass:"pa-1"}),a("div",{staticClass:"title text--secondary"},[t._v("Campos")]),a("v-dialog",{attrs:{"max-width":"300",scrollable:""},model:{value:t.newFieldDialog,callback:function(e){t.newFieldDialog=e},expression:"newFieldDialog"}},[a("v-card",["add"==t.newFieldDialogAction?a("v-card-title",{staticClass:"headline"},[t._v("Nuevo campo")]):t._e(),"edit"==t.newFieldDialogAction?a("v-card-title",{staticClass:"headline"},[t._v("Edición campo")]):t._e(),"delete"==t.newFieldDialogAction?a("v-card-title",{staticClass:"headline"},[t._v("Confirmación")]):t._e(),"delete"!=t.newFieldDialogAction?a("v-card-text",[a("v-form",{ref:"newFieldForm"},[a("v-text-field",{attrs:{solo:"",color:"deep-orange",counter:50,rules:t.newField.nombreCampoRules,label:"Nombre de campo",autocomplete:"off",required:""},model:{value:t.newField.nombreCampo,callback:function(e){t.$set(t.newField,"nombreCampo",e)},expression:"newField.nombreCampo"}}),a("v-select",{attrs:{solo:"","item-color":"deep-orange lighten-2",color:"deep-orange",items:t.fieldTypeData,"item-text":"nombre","item-value":"idTipoDato",rules:t.newField.tipoDatoNavigationRules,label:"Tipo de campo",autocomplete:"off",required:"","return-object":""},model:{value:t.newField.tipoDatoNavigation,callback:function(e){t.$set(t.newField,"tipoDatoNavigation",e)},expression:"newField.tipoDatoNavigation"}})],1)],1):t._e(),"delete"==t.newFieldDialogAction?a("v-card-text",[t._v('\n                  Desea eliminar el campo "'+t._s(t.selectedField.nombreCampo)+'"?\n              ')]):t._e(),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),"add"==t.newFieldDialogAction?a("v-btn",{attrs:{text:""},on:{click:function(e){return t.addFields()}}},[t._v("\n                      Agregar\n                  ")]):t._e(),"edit"==t.newFieldDialogAction?a("v-btn",{attrs:{text:""},on:{click:function(e){return t.updateField()}}},[t._v("\n                      Guardar\n                  ")]):t._e(),"delete"==t.newFieldDialogAction?a("v-btn",{attrs:{text:""},on:{click:function(e){return t.deleteField(t.selectedField)}}},[t._v("\n                      Eliminar\n                  ")]):t._e()],1)],1)],1),a("v-row",{staticClass:"pa-2"}),t.readOnly?t._e():a("v-row",{staticClass:"pl-8",attrs:{justify:"left"}},[a("v-btn",{attrs:{outlined:"",rounded:""},on:{click:function(e){return t.openFieldDialog("add")}}},[t._v("\n            Agregar\n          ")])],1),a("div",{staticClass:"scrolling-wrapper"},[t._l(t.templateData.campos,function(e){return a("div",{key:e.idPlantillaCampo,staticClass:"card"},[a("v-card",{staticClass:"mx-auto flex-row",attrs:{width:"300",hover:""}},[a("v-row",{staticClass:"ma-0"},[a("v-col",{staticClass:"pa-0",attrs:{lg:"9",cols:"9"}},[a("v-card-title",[t._v(t._s(e.nombreCampo))])],1),a("v-col",{staticClass:"pa-0"},[a("v-row",{staticClass:"ma-0"},[a("v-spacer"),t.readOnly?t._e():a("v-btn",{attrs:{icon:""},on:{click:function(a){return t.openFieldDialog("delete",e)}}},[a("v-icon",[t._v("\n                                  clear\n                              ")])],1)],1)],1)],1),a("v-card-text",[a("div",{staticClass:"subtitle-1 text--primary"},[t._v("Tipo de campo")]),t._v("\n                    "+t._s(e.tipoDatoNavigation.nombre)+"\n                ")]),a("v-card-actions",[a("v-layout",{staticClass:"ma-0",attrs:{row:"","justify-center":""}},[t.readOnly?t._e():a("v-btn",{attrs:{icon:""},on:{click:function(a){return t.openFieldDialog("edit",e)}}},[a("v-icon",[t._v("edit")])],1)],1)],1)],1)],1)}),a("div",{staticClass:"card"})],2),a("v-row",{staticClass:"pa-2"}),a("div",{staticClass:"title text--secondary"},[t._v("Pasos")]),a("v-dialog",{attrs:{"max-width":"325",scrollable:""},model:{value:t.newStepDialog,callback:function(e){t.newStepDialog=e},expression:"newStepDialog"}},[a("v-card",{attrs:{loading:t.loaderCard}},["add"==t.newStepDialogAction?a("v-card-title",{staticClass:"headline"},[t._v("Nuevo paso")]):t._e(),"edit"==t.newStepDialogAction?a("v-card-title",{staticClass:"headline"},[t._v("Edición paso")]):t._e(),"delete"==t.newStepDialogAction?a("v-card-title",{staticClass:"headline"},[t._v("Confirmación")]):t._e(),"delete"!=t.newStepDialogAction?a("v-card-text",[a("v-form",{ref:"newStepForm"},[a("v-text-field",{attrs:{solo:"",color:"deep-orange",counter:50,rules:t.newStep.nombreRules,label:"Nombre paso",autocomplete:"off",required:""},model:{value:t.newStep.nombre,callback:function(e){t.$set(t.newStep,"nombre",e)},expression:"newStep.nombre"}}),a("v-text-field",{attrs:{solo:"",color:"deep-orange",counter:50,rules:t.newStep.descripcionRules,label:"Descripción paso",autocomplete:"off",required:""},model:{value:t.newStep.descripcion,callback:function(e){t.$set(t.newStep,"descripcion",e)},expression:"newStep.descripcion"}}),a("div",{staticClass:"subtitle-1"},[t._v("Datos del paso")]),a("v-row",{staticClass:"pa-1"}),a("v-select",{attrs:{"item-color":"deep-orange lighten-2",solo:"",color:"deep-orange",items:t.usersData,label:"Seleccione usuarios","item-text":"nombres","item-value":"idUsuario",multiple:"",chips:"","deletable-chips":"","return-object":""},model:{value:t.newStep.usuarios,callback:function(e){t.$set(t.newStep,"usuarios",e)},expression:"newStep.usuarios"}}),a("v-select",{attrs:{"item-color":"deep-orange lighten-2",solo:"",color:"deep-orange",items:JSON.parse(JSON.stringify(t.templateData.campos)),label:"Seleccione campos","item-text":"nombreCampo","item-value":"idInstanciaPlantillaDato",multiple:"",chips:"","deletable-chips":"","return-object":""},model:{value:t.newStep.datos_pasos,callback:function(e){t.$set(t.newStep,"datos_pasos",e)},expression:"newStep.datos_pasos"}}),a("div",{staticClass:"body-2 text--secondary",attrs:{align:"center"}},[t._v("\n                      Seleccione los campos que no serán editables de la lista de abajo\n                  ")]),a("v-select",{attrs:{"item-color":"deep-orange lighten-2",solo:"",color:"deep-orange",items:t.newStep.datos_pasos,label:"Seleccione campos","item-text":"nombreCampo","item-value":"idInstanciaPlantillaDato",multiple:"",chips:"","deletable-chips":"","return-object":""},model:{value:t.newStep.read_only_datos,callback:function(e){t.$set(t.newStep,"read_only_datos",e)},expression:"newStep.read_only_datos"}})],1)],1):t._e(),"delete"==t.newStepDialogAction?a("v-card-text",[t._v('\n                  Desea eliminar el paso "'+t._s(t.selectedStep.nombre)+'"?\n              ')]):t._e(),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),"add"==t.newStepDialogAction?a("v-btn",{attrs:{text:""},on:{click:function(e){return t.addSteps()}}},[t._v("\n                      Agregar\n                  ")]):t._e(),"edit"==t.newStepDialogAction?a("v-btn",{attrs:{text:""},on:{click:function(e){return t.updateStep()}}},[t._v("\n                      Guardar\n                  ")]):t._e(),"delete"==t.newStepDialogAction?a("v-btn",{attrs:{text:""},on:{click:function(e){return t.deleteStep(t.selectedStep)}}},[t._v("\n                      Eliminar\n                  ")]):t._e()],1)],1)],1),a("v-row",{staticClass:"pa-2"}),t.readOnly?t._e():a("v-row",{staticClass:"pl-8",attrs:{justify:"left"}},[a("v-btn",{attrs:{outlined:"",rounded:""},on:{click:function(e){return t.openStepDialog("add")}}},[t._v("\n            Agregar\n          ")])],1),a("ParticipantsDialog",{attrs:{step:t.selectedStep,from:"paso"},model:{value:t.showParticipantsDialog,callback:function(e){t.showParticipantsDialog=e},expression:"showParticipantsDialog"}}),a("FieldsDialog",{attrs:{step:t.selectedStep},model:{value:t.showFieldsDialog,callback:function(e){t.showFieldsDialog=e},expression:"showFieldsDialog"}}),a("div",{staticClass:"scrolling-wrapper"},[t._l(t.templateData.pasos,function(e){return a("div",{key:e.idPlantillaPaso,staticClass:"card"},[a("v-card",{staticClass:"mx-auto flex-row",attrs:{width:"300",hover:""}},[a("v-row",{staticClass:"ma-0"},[a("v-col",{staticClass:"pa-0",attrs:{lg:"9",cols:"9"}},[a("v-card-title",[t._v(t._s(e.nombre))])],1),a("v-col",{staticClass:"pa-0"},[a("v-row",{staticClass:"ma-0"},[a("v-spacer"),t.readOnly?t._e():a("v-btn",{attrs:{icon:""},on:{click:function(a){return t.openStepDialog("delete",e)}}},[a("v-icon",[t._v("\n                                    clear\n                                ")])],1)],1)],1)],1),a("v-card-text",[a("div",{staticClass:"subtitle-1 text--primary"},[t._v("Descripción")]),t._v("\n                        "+t._s(e.descripcion)+"\n                    ")]),a("v-list-item",[a("v-list-item-icon",[a("v-btn",{attrs:{icon:""},on:{click:function(){t.showParticipantsDialog=!0,t.selectedStep=e}}},[a("v-icon",[t._v("people")])],1)],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Cant. de usuarios")]),a("v-list-item-subtitle",[t._v(t._s(e.usuarios.length))])],1)],1),a("v-list-item",[a("v-list-item-icon",[a("v-btn",{attrs:{icon:""},on:{click:function(){t.showFieldsDialog=!0,t.selectedStep=e}}},[a("v-icon",[t._v("list")])],1)],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Cant. de campos de info.")]),a("v-list-item-subtitle",[t._v(t._s(e.datos_Pasos.length))])],1)],1),a("v-card-actions",[a("v-layout",{staticClass:"ma-0",attrs:{row:"","justify-center":""}},[t.readOnly?t._e():a("v-btn",{attrs:{icon:""},on:{click:function(a){return t.openStepDialog("edit",e)}}},[a("v-icon",[t._v("edit")])],1)],1)],1)],1)],1)}),a("div",{staticClass:"card"})],2)],1):t._e(),a("v-snackbar",{attrs:{color:t.templateSnackbar.style,timeout:t.templateSnackbar.timeout},model:{value:t.templateSnackbar.active,callback:function(e){t.$set(t.templateSnackbar,"active",e)},expression:"templateSnackbar.active"}},[t._v("\n      "+t._s(t.templateSnackbar.text)+"\n          "),a("v-btn",{attrs:{text:""},on:{click:function(e){t.templateSnackbar.active=!1}}},[t._v("\n          Cerrar\n          ")])],1)],1)],1),a("v-dialog",{attrs:{width:"300"},model:{value:t.confirmSaveDialog,callback:function(e){t.confirmSaveDialog=e},expression:"confirmSaveDialog"}},[a("v-card",{attrs:{loading:t.confirmSaveDialogLoader}},[a("v-card-title",{staticClass:"headline"},[t._v("\n        Confirmación\n      ")]),a("v-card-text",[t._v("\n        Desea guardar los cambios en esta plantilla ?\n      ")]),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:""},on:{click:function(e){t.confirmSaveDialog=!1}}},[t._v("\n          Cancelar\n        ")]),a("v-btn",{attrs:{text:""},on:{click:function(e){return t.commitChanges()}}},[t._v("\n          Guardar\n        ")])],1)],1)],1),t.readOnly?t._e():a("v-fab-transition",[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.canSave,expression:"canSave"}],attrs:{color:"white",light:"",fixed:"",large:"",bottom:"",right:"",fab:""},on:{click:function(e){t.confirmSaveDialog=!0}}},[a("v-icon",[t._v("check")])],1)],1)],1)},M=[],W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"325"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-card",["paso"==t.from?a("v-card-title",[t._v("Participantes del paso")]):t._e(),"tarea"==t.from?a("v-card-title",[t._v("Participantes de la tarea")]):t._e(),a("v-card-text",{staticClass:"pb-0"},[a("div",{staticClass:"subtitle-1",attrs:{align:"center"}},[t._v(t._s(t.step.nombre))]),a("v-list",t._l(t.step.usuarios,function(e){return a("v-list-item",{key:e.idUsuario,staticClass:"pa-0"},[a("div",{staticClass:"subtitle-1"},[t._v(t._s(e.nombres)+" "+t._s(e.apellidos))])])}),1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:function(e){e.stopPropagation(),t.show=!1}}},[t._v("Cerrar")])],1)],1)],1)},G=[],J={props:{value:Boolean,from:String,step:[]},computed:{show:{get(){return this.value},set(t){this.$emit("input",t)}}},created(){}},K=J,Y=Object(r["a"])(K,W,G,!1,null,"139bd0cc",null),Q=Y.exports;c()(Y,{VBtn:u["a"],VCard:T["a"],VCardActions:I["a"],VCardText:I["b"],VCardTitle:I["c"],VDialog:F["a"],VList:h["a"],VListItem:b["a"],VSpacer:f["a"]});var X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"300"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-card",[a("v-card-title",[t._v("Campos de la plantilla")]),a("v-card-text",{staticClass:"pb-0"},[a("div",{staticClass:"subtitle-1",attrs:{align:"center"}},[t._v(t._s(t.step.nombre))]),a("v-list",t._l(t.step.datos_Pasos,function(e){return a("v-list-item",{key:e.idPlantillaCampo,staticClass:"pa-0"},[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.nombreCampo))]),a("v-list-item-subtitle",[t._v(t._s(e.tipoDatoNavigation.nombre))])],1)],1)}),1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:function(e){e.stopPropagation(),t.show=!1}}},[t._v("Cerrar")])],1)],1)],1)},Z=[],tt={props:{value:Boolean,step:[]},computed:{show:{get(){return this.value},set(t){this.$emit("input",t)}}}},et=tt,at=Object(r["a"])(et,X,Z,!1,null,"4f8606dd",null),st=at.exports;c()(at,{VBtn:u["a"],VCard:T["a"],VCardActions:I["a"],VCardText:I["b"],VCardTitle:I["c"],VDialog:F["a"],VList:h["a"],VListItem:b["a"],VListItemContent:g["a"],VListItemSubtitle:g["b"],VListItemTitle:g["c"],VSpacer:f["a"]});var it={props:["readOnly"],data:()=>({fieldTypeData:[{idTipoDato:1,nombre:"Texto"},{idTipoDato:2,nombre:"Numérico"},{idTipoDato:3,nombre:"Fecha"}],showParticipantsDialog:!1,showFieldsDialog:!1,usersData:[],sheet:!1,templateData:Object,canSave:!1,onlyNestedDialogs:!0,opened:!1,isLoaded:!1,editInfoTemplateDialog:!1,confirmSaveDialog:!1,confirmSaveDialogLoader:!1,newFieldDialog:!1,newFieldDialogAction:"",selectedField:Object,newStepDialog:!1,newStepDialogAction:"",selectedStep:Object,newTemplate:{nombre:"",nombreRules:[t=>!!t||"Nombre es requerido",t=>t&&t.length<=50||"Nombre debe ser menor o igual a 50"],descripcion:"",descripcionRules:[t=>!!t||"Descripción es requerido",t=>t&&t.length<=50||"Descripción debe ser menor o igual a 50"]},newField:{nombreCampo:"",nombreCampoRules:[t=>!!t||"Nombre de campo es requerido",t=>t&&t.length<=50||"Nombre de campo debe ser menor o igual a 50"],tipoDatoNavigation:"",tipoDatoNavigationRules:[t=>!!t||"Tipo de campo es requerido"]},newStep:{nombre:"",nombreRules:[t=>!!t||"Nombre paso es requerido",t=>t&&t.length<=50||"Nombre paso debe ser menor o igual a 50"],descripcion:"",descripcionRules:[t=>!!t||"Descripción paso es requerido",t=>t&&t.length<=50||"Descripción paso debe ser menor o igual a 50"],datos_pasos:[],read_only_datos:[],usuarios:[]},templateSnackbar:{style:String,active:!1,timeout:6e3,text:String}}),components:{ParticipantsDialog:Q,FieldsDialog:st},methods:{closeActivity(){this.opened=!1,this.$emit("close"),this.$router.go(-1)},saveChanges(t){this.opened=!1,this.canSave=!1,this.$emit("close",t),this.$router.go(-1)},hola(){this.onlyNestedDialogs||(this.opened=!1,this.$emit("close"),this.$router.go(-1))},async loadTemplate(){await this.$axios.get(this.$webServicesBaseURL+"Home/Plantillas/Details/"+this.$route.params.idPlantilla,{withCredentials:!0}).then(t=>{200==t.status&&11==t.data.code&&(this.templateData=t.data.data)}).catch(t=>{null!=t.response&&(404==t.response.status&&null!=t.response.data?this.showSnackbar(t.response.data.message,"error",1e3):this.showSnackbar(t,"error",1e3))})},async loadUsers(){await this.$axios.get(this.$webServicesBaseURL+"Home/Usuarios",{withCredentials:!0}).then(t=>{200==t.status&&31==t.data.code&&(this.usersData=t.data.data)})},openEditInfoDialog(){this.newTemplate.nombre=this.templateData.nombre,this.newTemplate.descripcion=this.templateData.descripcion,this.editInfoTemplateDialog=!0},saveChangeInfo(){this.$refs.infoTemplate.validate()&&(this.templateData.nombre=this.newTemplate.nombre,this.templateData.descripcion=this.newTemplate.descripcion,this.editInfoTemplateDialog=!1,this.canSave=!0)},addFields(){if(this.$refs.newFieldForm.validate()){var t={idorder:(new Date).getTime(),nombreCampo:this.newField.nombreCampo,tipoDato:this.newField.tipoDatoNavigation.idTipoDato,tipoDatoNavigation:this.newField.tipoDatoNavigation};this.templateData.campos.push(t),this.$refs.newFieldForm.reset(),this.newFieldDialog=!1,this.canSave=!0}},openFieldDialog(t,e){this.newFieldDialogAction=t,this.selectedField=e,"edit"==t?(this.newField.nombreCampo=e.nombreCampo,this.newField.tipoDatoNavigation=e.tipoDatoNavigation):(this.newField.nombreCampo="",this.newField.tipoDatoNavigation=""),this.newFieldDialog=!0},deleteField(t){let e=this.templateData.campos.splice(this.templateData.campos.indexOf(t),1);this.templateData.pasos.forEach(t=>{t.datos_Pasos.forEach(a=>{a.idPlantillaCampo==e[0].idPlantillaCampo&&t.datos_Pasos.splice(t.datos_Pasos.indexOf(a),1)})}),this.newFieldDialog=!1,this.canSave=!0},updateField(){this.$refs.newFieldForm.validate()&&(this.selectedField.nombreCampo=this.newField.nombreCampo,this.selectedField.tipoDato=this.newField.tipoDatoNavigation.idTipoDato,this.selectedField.tipoDatoNavigation=this.newField.tipoDatoNavigation,this.$refs.newFieldForm.reset(),this.newFieldDialog=!1,this.canSave=!0)},addSteps(){if(this.$refs.newStepForm.validate()){var t={nombre:this.newStep.nombre,descripcion:this.newStep.descripcion,datos_Pasos:this.newStep.datos_pasos,usuarios:this.newStep.usuarios};this.newStep.read_only_datos.forEach(t=>{t.soloLectura="1"}),this.templateData.pasos.push(t),this.$refs.newStepForm.reset(),this.newStepDialog=!1,this.canSave=!0}},openStepDialog(t,e){if(this.newStepDialogAction=t,this.selectedStep=e,"edit"==t){this.newStep.nombre=e.nombre,this.newStep.descripcion=e.descripcion,this.newStep.datos_pasos=e.datos_Pasos;let t=[];this.newStep.read_only_datos=[],this.newStep.datos_pasos.forEach(e=>{null!=e.idPlantillaCampo?(t.push(this.templateData.campos.find(t=>t.idPlantillaCampo==e.idPlantillaCampo)),e.soloLectura|"1"==e.soloLectura&&this.newStep.read_only_datos.push(this.templateData.campos.find(t=>t.idPlantillaCampo==e.idPlantillaCampo))):(t.push(this.templateData.campos.find(t=>t.idorder==e.idorder)),e.soloLectura|"1"==e.soloLectura&&this.newStep.read_only_datos.push(this.templateData.campos.find(t=>t.idorder==e.idorder)))}),this.newStep.datos_pasos=t,this.newStep.usuarios=e.usuarios}else this.newStep.nombre="",this.newStep.descripcion="",this.newStep.datos_pasos=[],this.newStep.usuarios=[];this.newStepDialog=!0},updateStep(){this.$refs.newStepForm.validate()&&(this.selectedStep.nombre=this.newStep.nombre,this.selectedStep.descripcion=this.newStep.descripcion,this.selectedStep.datos_Pasos=this.newStep.datos_pasos,this.selectedStep.usuarios=this.newStep.usuarios,this.selectedStep.read_only_datos=this.newStep.read_only_datos,this.selectedStep.datos_Pasos.forEach(t=>{t.soloLectura="0"}),this.selectedStep.read_only_datos.forEach(t=>{t.soloLectura="1"}),this.$refs.newStepForm.reset(),this.newStepDialog=!1,this.canSave=!0)},deleteStep(t){this.templateData.pasos.splice(this.templateData.pasos.indexOf(t),1),this.newStepDialog=!1,this.canSave=!0},async commitChanges(){this.confirmSaveDialogLoader="deep-orange",await this.$axios.put(this.$webServicesBaseURL+"Home/Plantillas/Edit/"+this.$route.params.idPlantilla,this.templateData,{withCredentials:!0}).then(t=>{200==t.status&&13==t.data.code&&(this.canSave=!1,this.saveChanges(t.data.data))}).catch(t=>{null!=t.response&&404==t.response.status&&null!=t.response.data?this.showSnackbar(t.response.data.message,"error",1e3):this.showSnackbar(t,"error",1e3)}),this.confirmSaveDialogLoader=!1,this.confirmSaveDialog=!1},showSnackbar(t,e,a){switch(this.templateSnackbar.active=!1,a){case 1:this.templateSnackbar.text='Plantilla "'+t+'" agregada.';break;case 2:this.templateSnackbar.text='Plantilla "'+t+'" eliminada.';break;case 3:this.templateSnackbar.text='Plantilla "'+t+'" actualizada.';break;default:this.templateSnackbar.text=t;break}this.templateSnackbar.active=!0,this.templateSnackbar.style=e},async initializeAll(){await this.loadUsers(),await this.loadTemplate(),this.isLoaded=!0}},mounted(){this.opened=!0,this.initializeAll()}},ot=it,nt=(a("e20c"),a("ce7e")),rt=Object(r["a"])(ot,H,M,!1,null,"6cd7c344",null),lt=rt.exports;c()(rt,{VApp:d["a"],VAppBar:p["a"],VBtn:u["a"],VCard:T["a"],VCardActions:I["a"],VCardText:I["b"],VCardTitle:I["c"],VCol:P["a"],VDialog:F["a"],VDivider:nt["a"],VFabTransition:$["c"],VForm:A["a"],VIcon:m["a"],VLayout:L["a"],VListItem:b["a"],VListItemContent:g["a"],VListItemIcon:N["a"],VListItemSubtitle:g["b"],VListItemTitle:g["c"],VProgressCircular:R["a"],VRow:w["a"],VSelect:U["a"],VSnackbar:O["a"],VSpacer:f["a"],VTextField:j["a"],VToolbarTitle:D["a"]});var ct={data:()=>({readOnlyDetails:!1,templatesData:[],usersData:[],fieldTypeData:[{idTipoDato:1,nombre:"Texto"},{idTipoDato:2,nombre:"Numérico"},{idTipoDato:3,nombre:"Fecha"}],templatesSnackbar:{style:String,active:!1,timeout:6e3,text:String},isLoaded:!1,inputDateDialog:!1,loaderCard:null,dialog:!1,actionDialog:"",fieldsProcessDialog:!1,newTemplateDialog:!1,newFieldDialog:!1,newFieldDialogAction:"",selectedField:Object,newStepDialog:!1,newStepDialogAction:"",selectedStep:Object,selectedTemplate:Object,newTemplate:{nombre:"",nombreRules:[t=>!!t||"Nombre es requerido",t=>t&&t.length<=50||"Nombre debe ser menor o igual a 50"],descripcion:"",descripcionRules:[t=>!!t||"Descripción es requerido",t=>t&&t.length<=50||"Descripción debe ser menor o igual a 50"],Campos:[],Pasos:[]},newField:{nombreCampo:"",nombreCampoRules:[t=>!!t||"Nombre de campo es requerido",t=>t&&t.length<=50||"Nombre de campo debe ser menor o igual a 50"],tipoDatoNavigation:"",tipoDatoNavigationRules:[t=>!!t||"Tipo de campo es requerido"]},newStep:{nombre:"",nombreRules:[t=>!!t||"Nombre paso es requerido",t=>t&&t.length<=50||"Nombre paso debe ser menor o igual a 50"],descripcion:"",descripcionRules:[t=>!!t||"Descripción paso es requerido",t=>t&&t.length<=50||"Descripción paso debe ser menor o igual a 50"],datos_pasos:[],read_only_datos:[],usuarios:[]}}),components:{TemplateDetailPage:lt},methods:{async crear_proceso(t){this.loaderCard="deep-orange";var e=await this.$axios.post(this.$webServicesBaseURL+"Home/InstanciasPlantillas",t,{withCredentials:!0}).then(e=>{if(200==e.status&&22==e.data.code)return this.showSnackbar(t.nombre,"success",1e3),e.data.data}).catch(e=>{null!=e.response&&(404==e.response.status&&null!=e.response.data?(20==e.response.data.code&&this.templatesData.splice(this.templatesData.indexOf(t),1),this.showSnackbar(e.response.data.message,"error",1e3)):this.showSnackbar(e,"error",1e3))});return this.loaderCard=!1,this.dialog=!1,e},async startProcess(t){this.$refs.processInstanceForm.validate()&&(this.loaderCard="deep-orange",await this.$axios.put(this.$webServicesBaseURL+"Home/InstanciasPlantillas/Edit/"+t.idInstanciaPlantilla,t,{withCredentials:!0}).then(e=>{200==e.status&&23==e.data.code&&this.showSnackbar(t.nombre,"success",4)}).catch(t=>{null!=t.response&&404==t.response.status&&null!=t.response.data?this.showSnackbar(t.response.data.message,"error",1e3):this.showSnackbar(t,"error",1e3)}),this.loaderCard=!1,this.fieldsProcessDialog=!1)},async doCreateStartProcess(t){var e=await this.crear_proceso(t);console.log(e);for(var a=0;a<e.datos.length;a++)e.datos[a].datoDate=t.campos[a].datoDate,e.datos[a].datoInteger=t.campos[a].datoInteger,e.datos[a].datoString=t.campos[a].datoString;await this.startProcess(e)},async loadTemplates(){await this.$axios.get(this.$webServicesBaseURL+"Home/Plantillas",{withCredentials:!0}).then(t=>{200==t.status&&11==t.data.code&&(this.templatesData=t.data.data)})},createProcessDialog(t){this.dialog=!0,this.selectedTemplate=t,this.actionDialog="createProcess"},createStartProcessDialog(t){this.dialog=!0,this.selectedTemplate=t,this.actionDialog="createStartProcess"},updateModifiedTemplate(t){if(null!=t){let e=this.templatesData.find(e=>e.idPlantilla==t.idPlantilla);e.nombre=t.nombre,e.descripcion=t.descripcion,e.campos=t.campos,e.pasos=t.pasos}},addFields(){if(this.$refs.newFieldForm.validate()){var t={idorder:(new Date).getTime(),nombreCampo:this.newField.nombreCampo,soloLectura:!1,tipoDato:this.newField.tipoDatoNavigation.idTipoDato,tipoDatoNavigation:this.newField.tipoDatoNavigation};this.newTemplate.Campos.push(t),this.$refs.newFieldForm.reset(),this.newFieldDialog=!1}},openFieldDialog(t,e){this.newFieldDialogAction=t,this.selectedField=e,"edit"==t?(this.newField.nombreCampo=e.nombreCampo,this.newField.tipoDatoNavigation=e.tipoDatoNavigation):(this.newField.nombreCampo="",this.newField.tipoDatoNavigation=""),this.newFieldDialog=!0},deleteField(t){this.newTemplate.Campos.splice(this.newTemplate.Campos.indexOf(t),1),this.newFieldDialog=!1},updateField(){this.$refs.newFieldForm.validate()&&(this.selectedField.nombreCampo=this.newField.nombreCampo,this.selectedField.tipoDatoNavigation=this.newField.tipoDatoNavigation,this.$refs.newFieldForm.reset(),this.newFieldDialog=!1)},addSteps(){if(this.$refs.newStepForm.validate()){var t={nombre:this.newStep.nombre,descripcion:this.newStep.descripcion,datos_pasos:this.newStep.datos_pasos,usuarios:this.newStep.usuarios};this.newStep.read_only_datos.forEach(t=>{t.soloLectura=!0}),this.newTemplate.Pasos.push(t),this.$refs.newStepForm.reset(),this.newStepDialog=!1}},openStepDialog(t,e){this.newStepDialogAction=t,this.selectedStep=e,"edit"==t?(this.newStep.nombre=e.nombre,this.newStep.descripcion=e.descripcion,this.newStep.datos_pasos=e.datos_pasos,this.newStep.read_only_datos=[],this.newStep.datos_pasos.forEach(t=>{t.soloLectura&&this.newStep.read_only_datos.push(t)}),this.newStep.usuarios=e.usuarios):(this.newStep.nombre="",this.newStep.descripcion="",this.newStep.datos_pasos=[],this.newStep.usuarios=[]),this.newStepDialog=!0},updateStep(){this.$refs.newStepForm.validate()&&(this.selectedStep.nombre=this.newStep.nombre,this.selectedStep.descripcion=this.newStep.descripcion,this.selectedStep.datos_pasos=this.newStep.datos_pasos,this.selectedStep.usuarios=this.newStep.usuarios,this.selectedStep.read_only_datos=this.newStep.read_only_datos,this.selectedStep.datos_pasos.forEach(t=>{t.soloLectura=!1}),this.selectedStep.read_only_datos.forEach(t=>{t.soloLectura=!0}),this.$refs.newStepForm.reset(),this.newStepDialog=!1)},deleteStep(t){this.newTemplate.Pasos.splice(this.newTemplate.Pasos.indexOf(t),1),this.newStepDialog=!1},async addTemplate(){if(this.$refs.newTemplateForm.validate()){this.loaderCard="deep-orange";let t={nombre:this.newTemplate.nombre,descripcion:this.newTemplate.descripcion,campos:this.newTemplate.Campos,pasos:this.newTemplate.Pasos};await this.$axios.post(this.$webServicesBaseURL+"Home/Plantillas/Create",t,{withCredentials:!0}).then(e=>{200==e.status&&12==e.data.code&&(this.templatesData.push(e.data.data),this.showSnackbar(t.nombre,"success",1))}).catch(t=>{null!=t.response&&404==t.response.status&&null!=t.response.data?this.showSnackbar(t.response.data.message,"error",1e3):this.showSnackbar(t,"error",1e3)}),this.loaderCard=!1,this.newTemplateDialog=!1}},async deleteTemplate(t){this.loaderCard="deep-orange",await this.$axios.delete(this.$webServicesBaseURL+"Home/Plantillas/Delete/"+t.idPlantilla,{withCredentials:!0}).then(e=>{200==e.status&&19==e.data.code&&(this.templatesData.splice(this.templatesData.indexOf(t),1),this.showSnackbar(t.nombre,"success",2))}).catch(e=>{null!=e.response&&404==e.response.status&&null!=e.response.data?(10==e.response.data.code&&this.templatesData.splice(this.templatesData.indexOf(t),1),this.showSnackbar(e.response.data.message,"error",1e3)):this.showSnackbar(e,"error",1e3)}),this.loaderCard=!1,this.dialog=!1},onCancelDialog(){this.$refs.newTemplateForm.reset(),this.newTemplateDialog=!1},goDetails(t,e){"edit"==e?(this.readOnlyDetails=!1,this.$router.push({name:"Plantilla",params:{idPlantilla:t.idPlantilla}})):(this.readOnlyDetails=!0,this.$router.push({name:"Plantilla",params:{idPlantilla:t.idPlantilla}}))},showSnackbar(t,e,a){switch(this.templatesSnackbar.active=!1,a){case 1:this.templatesSnackbar.text='Plantilla "'+t+'" agregada.';break;case 2:this.templatesSnackbar.text='Plantilla "'+t+'" eliminada.';break;case 3:this.templatesSnackbar.text='Plantilla "'+t+'" actualizada.';break;case 4:this.templatesSnackbar.text='Proceso "'+t+'" iniciado.';break;default:this.templatesSnackbar.text=t;break}this.templatesSnackbar.active=!0,this.templatesSnackbar.style=e},async loadUsers(){await this.$axios.get(this.$webServicesBaseURL+"Home/Usuarios",{withCredentials:!0}).then(t=>{200==t.status&&31==t.data.code&&(this.usersData=t.data.data)})},async initializeAll(){await this.loadTemplates(),await this.loadUsers(),this.isLoaded=!0}},created(){this.initializeAll()}},dt=ct,pt=(a("6cba"),a("4ca6")),vt=a("2e4b"),ut=Object(r["a"])(dt,z,q,!1,null,"47976a1a",null),mt=ut.exports;c()(ut,{VApp:d["a"],VAppBar:p["a"],VAppBarNavIcon:v["a"],VBadge:pt["a"],VBtn:u["a"],VCard:T["a"],VCardActions:I["a"],VCardText:I["b"],VCardTitle:I["c"],VCol:P["a"],VDatePicker:vt["a"],VDialog:F["a"],VDivider:nt["a"],VFabTransition:$["c"],VForm:A["a"],VIcon:m["a"],VLayout:L["a"],VList:h["a"],VListItem:b["a"],VListItemContent:g["a"],VListItemIcon:N["a"],VListItemSubtitle:g["b"],VListItemTitle:g["c"],VMenu:_["a"],VProgressCircular:R["a"],VRow:w["a"],VSelect:U["a"],VSnackbar:O["a"],VSpacer:f["a"],VTextField:j["a"],VToolbarTitle:D["a"]});var ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[t.isLoaded?t._e():a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{align:"center"}},[a("v-progress-circular",{attrs:{size:70,width:7,color:"deep-orange",indeterminate:""}})],1)],1),t.isLoaded?a("v-row",{staticClass:"ma-0"},[a("v-dialog",{attrs:{scrollable:"","max-width":"350",persistent:!0},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{staticClass:"hola",attrs:{loading:t.loaderCard}},[a("v-card-title",{staticClass:"headline"},[t._v("Inicio de proceso")]),a("v-card-text",[a("div",{staticClass:"title text--secondary"},[t._v("Información de proceso")]),a("v-row",{staticClass:"pa-1"}),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v("Nombre proceso")]),a("v-spacer"),a("v-list-item-subtitle",[t._v(t._s(t.selectedTemplateInstance.nombre))])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v("Descripción")]),a("v-spacer"),a("v-list-item-subtitle",[t._v(t._s(t.selectedTemplateInstance.descripcion))])],1)],1),a("v-form",{ref:"processInstanceForm"},[a("v-divider"),a("div",{staticClass:"title text--secondary"},[t._v("Campos de información")]),a("v-row",{staticClass:"pa-1"}),a("v-list",t._l(t.selectedTemplateInstance.datos,function(e){return a("v-list-item",{key:e.idInstanciaPlantillaDato,staticClass:"pa-0"},[1==e.tipoDato?a("v-text-field",{attrs:{type:"text",outlined:"",color:"deep-orange",counter:50,label:e.nombreCampo,autocomplete:"off",required:""},model:{value:e.datoString,callback:function(a){t.$set(e,"datoString",a)},expression:"campo.datoString"}}):t._e(),2==e.tipoDato?a("v-text-field",{attrs:{type:"number",outlined:"",color:"deep-orange",counter:50,label:e.nombreCampo,autocomplete:"off",required:""},model:{value:e.datoInteger,callback:function(a){t.$set(e,"datoInteger",a)},expression:"campo.datoInteger"}}):t._e(),3==e.tipoDato?a("v-dialog",{ref:"inputDateDialog",refInFor:!0,attrs:{"return-value":e.datoDate,persistent:"","full-width":"",width:"290px"},on:{"update:returnValue":function(a){return t.$set(e,"datoDate",a)},"update:return-value":function(a){return t.$set(e,"datoDate",a)}},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on;return[a("v-text-field",t._g({attrs:{solo:"",label:e.nombreCampo,readonly:""},model:{value:e.datoDate,callback:function(a){t.$set(e,"datoDate",a)},expression:"campo.datoDate"}},i))]}}],null,!0),model:{value:t.inputDateDialog,callback:function(e){t.inputDateDialog=e},expression:"inputDateDialog"}},[a("v-date-picker",{attrs:{scrollable:""},model:{value:e.datoDate,callback:function(a){t.$set(e,"datoDate",a)},expression:"campo.datoDate"}},[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:""},on:{click:function(e){t.inputDateDialog=!1}}},[t._v("Cancel")]),a("v-btn",{attrs:{text:""},on:{click:function(a){return t.closeInputDateDialog(e.datoDate)}}},[t._v("OK")])],1)],1):t._e()],1)}),1)],1)],1),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n                        Cancelar\n                    ")]),a("v-btn",{attrs:{text:"",color:"light-green accent-3"},on:{click:function(e){return t.startProcess(t.selectedTemplateInstance)}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-play")]),t._v(" Iniciar\n                    ")],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"325"},model:{value:t.deleteDialog,callback:function(e){t.deleteDialog=e},expression:"deleteDialog"}},[a("v-card",{attrs:{loading:t.loaderCard}},[a("v-card-title",{staticClass:"headline"},[t._v("Confirmación")]),a("v-card-text",[t._v('\n                    Desea eliminar el proceso "'+t._s(t.selectedTemplateInstance.nombre)+'"?\n                ')]),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:""},on:{click:function(e){t.deleteDialog=!1}}},[t._v("\n                    No\n                ")]),a("v-btn",{attrs:{text:""},on:{click:function(e){return t.deleteTemplateInstance(t.selectedTemplateInstance)}}},[t._v("\n                    Si\n                ")])],1)],1)],1),t._l(t.templatesInstancesData,function(e){return a("v-col",{key:e.idInstanciaplantilla,attrs:{xs:"12",sm:"6",md:"4",lg:"3",xl:"2",cols:"12"}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"400",hover:""}},[a("v-row",{staticClass:"ma-0"},[a("v-col",{staticClass:"pa-0",attrs:{lg:"0"==e.iniciada?9:null,cols:"0"==e.iniciada?9:null}},[a("v-card-title",[t._v(t._s(e.nombre))])],1),"0"==e.iniciada?a("v-col",{staticClass:"pa-0"},[a("v-row",{staticClass:"ma-0"},[a("v-spacer"),a("v-btn",{attrs:{icon:"",large:""},on:{click:function(a){t.deleteDialog=!0,t.selectedTemplateInstance=e}}},[a("v-icon",[t._v("\n                                clear\n                            ")])],1)],1)],1):t._e()],1),a("v-card-text",[a("div",{staticClass:"subtitle-1 text--primary"},[t._v("Descripción")]),t._v("\n                    "+t._s(e.descripcion)+"\n                ")]),a("v-list-item",[a("v-list-item-icon",[a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("linear_scale")])],1)],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Cant. de pasos")]),a("v-list-item-subtitle",[t._v(t._s(e.pasos.length))])],1)],1),a("v-list-item",[a("v-list-item-icon",[a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("list")])],1)],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Cant. de campos de info.")]),a("v-list-item-subtitle",[t._v(t._s(e.datos.length))])],1)],1),a("v-row",{staticClass:"ma-0",attrs:{justify:"center"}},[a("div",[a("div",{attrs:{"d-block":""}},[a("v-progress-circular",{attrs:{size:100,width:10,value:t.getPorcentageComplete(e),color:"white"}},[t._v("\n                            "+t._s(e.porcentageValue)+"%\n                            ")])],1),a("v-card-text",{staticClass:"pa-0 ma-0"},[t._v("\n                            "+t._s(e.pasos.filter(function(t){return 1==t.estado}).length)+"/"+t._s(e.pasos.length)+"\n                        ")])],1)]),a("v-card-actions",[a("v-layout",{staticClass:"ma-0",attrs:{row:"","align-center":""}},["0"==e.iniciada&&"0"==e.estado?a("v-btn",{attrs:{text:"",icon:"",color:"light-green accent-3"},on:{click:function(a){t.dialog=!0,t.selectedTemplateInstance=e}}},[a("v-icon",[t._v("mdi-play")])],1):t._e(),"1"==e.iniciada&&"0"==e.estado?a("v-progress-circular",{attrs:{indeterminate:"",color:"light-green accent-3",width:"3",size:"20"}}):t._e(),"1"==e.iniciada&&"1"==e.estado?a("v-progress-circular",{attrs:{value:"100",color:"light-green accent-3",width:"3",size:"20"}}):t._e(),a("v-divider",{staticClass:"mx-1 transparent",attrs:{vertical:""}}),a("v-btn",{attrs:{icon:""},on:{click:function(a){return t.goDetails(e)}}},[a("v-icon",[t._v("visibility")])],1)],1)],1)],1)],1)})],2):t._e(),a("router-view"),a("v-snackbar",{attrs:{color:t.templatesInstancesSnackbar.style,timeout:t.templatesInstancesSnackbar.timeout},model:{value:t.templatesInstancesSnackbar.active,callback:function(e){t.$set(t.templatesInstancesSnackbar,"active",e)},expression:"templatesInstancesSnackbar.active"}},[t._v("\n    "+t._s(t.templatesInstancesSnackbar.text)+"\n        "),a("v-btn",{attrs:{text:""},on:{click:function(e){t.templatesInstancesSnackbar.active=!1}}},[t._v("\n        Cerrar\n        ")])],1)],1)},bt=[],gt={data:()=>({templatesInstancesData:[],selectedTemplateInstance:Object,usersData:[],isLoaded:!1,dialog:!1,deleteDialog:!1,inputDateDialog:!1,loaderCard:null,templatesInstancesSnackbar:{text:String,active:!1,style:String,timeout:6e3}}),methods:{async loadTemplatesIntances(){await this.$axios.get(this.$webServicesBaseURL+"Home/InstanciasPlantillas",{withCredentials:!0}).then(t=>{200==t.status&&21==t.data.code&&(this.templatesInstancesData=t.data.data)})},async deleteTemplateInstance(t){this.loaderCard="deep-orange",await this.$axios.delete(this.$webServicesBaseURL+"Home/InstanciasPlantillas/Delete/"+t.idInstanciaPlantilla,{withCredentials:!0}).then(e=>{200==e.status&&29==e.data.code&&(this.templatesInstancesData.splice(this.templatesInstancesData.indexOf(t),1),this.showSnackbar(t.nombre,"success",2))}).catch(e=>{404==e.status&&null!=e.data?(20==e.data.code&&this.templatesInstancesData.splice(this.templatesInstancesData.indexOf(t),1),this.showSnackbar(e.data.message,"error",1e3)):this.showSnackbar(e,"error",1e3)}),this.loaderCard=!1,this.deleteDialog=!1},async startProcess(t){this.$refs.processInstanceForm.validate()&&(this.loaderCard="deep-orange",await this.$axios.put(this.$webServicesBaseURL+"Home/InstanciasPlantillas/Edit/"+this.selectedTemplateInstance.idInstanciaPlantilla,t,{withCredentials:!0}).then(e=>{200==e.status&&23==e.data.code&&(t.iniciada=e.data.data.iniciada,t.datos=e.data.data.datos,t.pasos=e.data.data.pasos,this.showSnackbar(t.nombre,"success",1))}).catch(t=>{404==t.status&&null!=t.data?(20==t.data.code&&this.templatesInstancesData.splice(this.templatesInstancesData.indexOf(templateInstance),1),this.showSnackbar(t.data.message,"error",1e3)):this.showSnackbar(t,"error",1e3)}),this.loaderCard=!1,this.dialog=!1)},showSnackbar(t,e,a){switch(this.templatesInstancesSnackbar.active=!1,a){case 1:this.templatesInstancesSnackbar.text='Proceso "'+t+'" iniciado.';break;case 2:this.templatesInstancesSnackbar.text='Proceso "'+t+'" eliminado.';break;default:this.templatesInstancesSnackbar.text=t;break}this.templatesInstancesSnackbar.active=!0,this.templatesInstancesSnackbar.style=e},goDetails(t){this.$router.push({name:"Proceso",params:{idInstanciaPlantilla:t.idInstanciaPlantilla}})},getPorcentageComplete(t){var e=t.pasos.filter(t=>{if(null!=t.estadoNavigation&&"Aprobar"==t.estadoNavigation.nombre|"Aprobado"==t.estadoNavigation.nombre)return t}).length;return t.porcentageValue=0==e?0:100/t.pasos.length*e,t.porcentageValue=t.porcentageValue.toFixed(1),t.porcentageValue},closeInputDateDialog(t){this.$refs.inputDateDialog[0].save(t)},async initializeAll(){await this.loadTemplatesIntances(),this.isLoaded=!0}},created(){this.initializeAll()}},_t=gt,wt=Object(r["a"])(_t,ht,bt,!1,null,"4322f39e",null),ft=wt.exports;c()(wt,{VApp:d["a"],VBtn:u["a"],VCard:T["a"],VCardActions:I["a"],VCardText:I["b"],VCardTitle:I["c"],VCol:P["a"],VDatePicker:vt["a"],VDialog:F["a"],VDivider:nt["a"],VForm:A["a"],VIcon:m["a"],VLayout:L["a"],VList:h["a"],VListItem:b["a"],VListItemContent:g["a"],VListItemIcon:N["a"],VListItemSubtitle:g["b"],VListItemTitle:g["c"],VProgressCircular:R["a"],VRow:w["a"],VSnackbar:O["a"],VSpacer:f["a"],VTextField:j["a"]});var Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[t.isLoaded?t._e():a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{align:"center"}},[a("v-progress-circular",{attrs:{size:70,width:7,color:"deep-orange",indeterminate:""}})],1)],1),t.isLoaded?a("v-row",{staticClass:"ma-0"},t._l(t.templatesInstancesData,function(e){return a("v-col",{key:e.idInstanciaplantilla,attrs:{xs:"12",sm:"6",md:"4",lg:"3",xl:"2",cols:"12"}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"400",hover:""}},[a("v-row",{staticClass:"ma-0"},[a("v-card-title",[t._v(t._s(e.nombre))])],1),a("v-card-text",[a("div",{staticClass:"subtitle-1 text--primary"},[t._v("Descripción")]),t._v("\n                    "+t._s(e.descripcion)+"\n                ")]),a("v-list-item",[a("v-list-item-icon",[a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("linear_scale")])],1)],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Cant. de pasos")]),a("v-list-item-subtitle",[t._v(t._s(e.pasos.length))])],1)],1),a("v-list-item",[a("v-list-item-icon",[a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("list")])],1)],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Cant. de campos de info.")]),a("v-list-item-subtitle",[t._v(t._s(e.datos.length))])],1)],1),a("v-row",{staticClass:"ma-0",attrs:{justify:"center"}},[a("div",[a("div",{attrs:{"d-block":""}},[a("v-progress-circular",{attrs:{size:100,width:10,value:t.getPorcentageComplete(e),color:"white"}},[t._v("\n                            "+t._s(e.porcentageValue)+"%\n                            ")])],1),a("v-card-text",{staticClass:"pa-0 ma-0"},[t._v("\n                            "+t._s(e.pasos.filter(function(t){return 1==t.estado}).length)+"/"+t._s(e.pasos.length)+"\n                        ")])],1)]),a("v-card-actions",[a("v-layout",{staticClass:"ma-0",attrs:{row:"","align-center":""}},["1"==e.iniciada&&"0"==e.estado?a("v-progress-circular",{attrs:{indeterminate:"",color:"light-green accent-3",width:"3",size:"20"}}):t._e(),"1"==e.iniciada&&"1"==e.estado?a("v-progress-circular",{attrs:{value:"100",color:"light-green accent-3",width:"3",size:"20"}}):t._e(),a("v-divider",{staticClass:"mx-1 transparent",attrs:{vertical:""}}),a("v-btn",{attrs:{icon:""},on:{click:function(a){return t.goDetails(e)}}},[a("v-icon",[t._v("visibility")])],1)],1)],1)],1)],1)}),1):t._e(),a("router-view"),a("v-snackbar",{attrs:{color:t.templatesInstancesSnackbar.style,timeout:t.templatesInstancesSnackbar.timeout},model:{value:t.templatesInstancesSnackbar.active,callback:function(e){t.$set(t.templatesInstancesSnackbar,"active",e)},expression:"templatesInstancesSnackbar.active"}},[t._v("\n    "+t._s(t.templatesInstancesSnackbar.text)+"\n        "),a("v-btn",{attrs:{text:""},on:{click:function(e){t.templatesInstancesSnackbar.active=!1}}},[t._v("\n        Cerrar\n        ")])],1)],1)},kt=[],Ct={data:()=>({templatesInstancesData:[],isLoaded:!1,templatesInstancesSnackbar:{text:String,active:!1,style:String,timeout:6e3}}),methods:{async loadTemplatesIntances(){await this.$axios.get(this.$webServicesBaseURL+"Home/InstanciasPlantillas/List",{withCredentials:!0}).then(t=>{200==t.status&&21==t.data.code&&(this.templatesInstancesData=t.data.data)})},showSnackbar(t,e,a){switch(this.templatesInstancesSnackbar.active=!1,a){case 1:this.templatesInstancesSnackbar.text='Proceso "'+t+'" iniciado.';break;case 2:this.templatesInstancesSnackbar.text='Proceso "'+t+'" eliminado.';break;default:this.templatesInstancesSnackbar.text=t;break}this.templatesInstancesSnackbar.active=!0,this.templatesInstancesSnackbar.style=e},goDetails(t){console.log(t),this.$router.push({name:"Proceso",params:{idInstanciaPlantilla:t.idInstanciaPlantilla}})},getPorcentageComplete(t){var e=t.pasos.filter(t=>{if(null!=t.estadoNavigation&&"Aprobar"==t.estadoNavigation.nombre|"Aprobado"==t.estadoNavigation.nombre)return t}).length;return t.porcentageValue=0==e?0:100/t.pasos.length*e,t.porcentageValue=t.porcentageValue.toFixed(1),t.porcentageValue},async initializeAll(){await this.loadTemplatesIntances(),this.isLoaded=!0}},created(){this.initializeAll()},mounted(){}},St=Ct,xt=Object(r["a"])(St,Dt,kt,!1,null,"5d1ddbb4",null),yt=xt.exports;c()(xt,{VApp:d["a"],VBtn:u["a"],VCard:T["a"],VCardActions:I["a"],VCardText:I["b"],VCardTitle:I["c"],VCol:P["a"],VDivider:nt["a"],VIcon:m["a"],VLayout:L["a"],VListItem:b["a"],VListItemContent:g["a"],VListItemIcon:N["a"],VListItemSubtitle:g["b"],VListItemTitle:g["c"],VProgressCircular:R["a"],VRow:w["a"],VSnackbar:O["a"]});var Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{attrs:{app:"",flat:"",color:"deep-orange"},scopedSlots:t._u([{key:"extension",fn:function(){return[a("v-tabs",{attrs:{"align-with-title":"","background-color":"transparent",color:"white",flat:"",centered:""},model:{value:t.tab1,callback:function(e){t.tab1=e},expression:"tab1"}},[a("v-tabs-slider"),t._l(t.sections,function(e){return a("v-tab",{key:e.id,attrs:{href:e.href}},[t._v("\n          "+t._s(e.title)+"\n        ")])})],2)]},proxy:!0}])},[a("v-app-bar-nav-icon",{on:{click:function(e){return t.$emit("openClose")}}}),a("v-toolbar-title",{staticClass:"headline"},[a("span",[t._v(t._s(this.$route.matched[0].name))])]),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("search")])],1),a("v-menu",{attrs:{origin:"center center",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{icon:""}},s),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}])},[a("v-list",t._l(t.$app_bar_actions,function(e){return a("v-list-item",{key:e.index,on:{click:function(){}}},[a("v-list-item-title",[t._v(t._s(e.title))])],1)}),1)],1)],1),a("v-tabs-items",{model:{value:t.tab1,callback:function(e){t.tab1=e},expression:"tab1"}},[a("v-tab-item",{attrs:{value:"myProcess"}},[a("MyProcessPage")],1),a("v-tab-item",{attrs:{value:"process"}},[a("AllProcessPage")],1),a("v-tab-item",{attrs:{value:"myTasks"}},[a("TasksPage")],1)],1)],1)},Tt=[],It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[t.isLoaded?t._e():a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{align:"center"}},[a("v-progress-circular",{attrs:{size:70,width:7,color:"deep-orange",indeterminate:""}})],1)],1),t.isLoaded?a("v-row",{staticClass:"ma-0"},[a("v-dialog",{attrs:{"max-width":"325"},model:{value:t.showTakeitDialog,callback:function(e){t.showTakeitDialog=e},expression:"showTakeitDialog"}},[a("v-card",{attrs:{loading:t.loaderCard}},[a("v-card-title",[t._v("Confirmación")]),a("v-card-text",[t._v('\n                    Desea iniciar la tarea "'+t._s(t.selectedTask.nombre)+'" y ser el actual responsable de la tarea ?\n                    '),a("br"),a("br"),a("div",{staticClass:"subtitle-1 text--primary"},[t._v("\n                        Nota\n                    ")]),t._v("\n                    Despues de aceptar puede redireccionar la tarea a cualquiera de \n                    los otros participantes de la tarea.\n                ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:function(e){t.showTakeitDialog=!1}}},[t._v("Cancelar")]),a("v-btn",{attrs:{text:""},on:{click:function(e){return t.startTask(t.selectedTask)}}},[t._v("Iniciar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"325"},model:{value:t.showApproveDialog,callback:function(e){t.showApproveDialog=e},expression:"showApproveDialog"}},[a("v-card",{attrs:{loading:t.loaderCard}},[a("v-card-title",[t._v("Confirmación")]),a("v-card-text",[t._v('\n                    Desea aprobar la tarea "'+t._s(t.selectedTask.nombre)+'" ?\n                ')]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:function(e){t.showApproveDialog=!1}}},[t._v("Cancelar")]),a("v-btn",{attrs:{text:"",color:"green"},on:{click:function(e){return t.approveTask(t.selectedTask)}}},[t._v("Aprobar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"325"},model:{value:t.showRejectDialog,callback:function(e){t.showRejectDialog=e},expression:"showRejectDialog"}},[a("v-card",{attrs:{loading:t.loaderCard}},[a("v-card-title",[t._v("Confirmación")]),a("v-card-text",[t._v('\n                    Desea rechazar la tarea "'+t._s(t.selectedTask.nombre)+'" ?\n                ')]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:function(e){t.showApproveDialog=!1}}},[t._v("Cancelar")]),a("v-btn",{attrs:{text:"",color:"red"},on:{click:function(e){return t.rejectTask(t.selectedTask)}}},[t._v("Rechazar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"325"},model:{value:t.showReturnDialog,callback:function(e){t.showReturnDialog=e},expression:"showReturnDialog"}},[a("v-card",{attrs:{loading:t.loaderCard}},[a("v-card-title",[t._v("Confirmación")]),a("v-card-text",[t._v('\n                    Desea regresar la tarea "'+t._s(t.selectedTask.nombre)+'" ?\n                ')]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:function(e){t.showApproveDialog=!1}}},[t._v("Cancelar")]),a("v-btn",{attrs:{text:"",color:"amber"},on:{click:function(e){return t.returnTask(t.selectedTask)}}},[t._v("Regresar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"325"},model:{value:t.showRedirectDialog,callback:function(e){t.showRedirectDialog=e},expression:"showRedirectDialog"}},[a("v-card",{attrs:{loading:t.loaderCard}},[a("v-card-title",[t._v("Confirmación")]),a("v-card-text",[t._v('\n                    Desea redireccionar la tarea "'+t._s(t.selectedTask.nombre)+'" a otro participante ?\n                    '),a("v-row",{staticClass:"pt-3"}),a("v-form",{ref:"newUserRedirect"},[a("v-select",{attrs:{color:"white","item-color":"orange",items:null!=t.selectedTask.usuarios?t.selectedTask.usuarios.filter(function(e){return e.idUsuario!=t.session_claims.user_id}):[],label:"Seleccione participante","item-text":"nombres","item-value":"idUsuario",rules:[function(t){return!!t||"Participante es requerido"}],solo:"","return-object":""},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item;return[t._v("\n                                "+t._s(a.nombres)+" "+t._s(a.apellidos)+"\n                            ")]}}],null,!1,578028440),model:{value:t.newUserRedirect,callback:function(e){t.newUserRedirect=e},expression:"newUserRedirect"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:function(e){t.showApproveDialog=!1}}},[t._v("Cancelar")]),a("v-btn",{attrs:{text:"",color:"blue darken-1"},on:{click:function(e){return t.redirectTask(t.selectedTask)}}},[t._v("Redireccionar")])],1)],1)],1),a("ParticipantsDialog",{attrs:{step:t.selectedTask,from:"tarea"},model:{value:t.showParticipantsDialog,callback:function(e){t.showParticipantsDialog=e},expression:"showParticipantsDialog"}}),a("TaskDatosDialog",{attrs:{task:t.selectedTask},model:{value:t.showTaskDatosDialog,callback:function(e){t.showTaskDatosDialog=e},expression:"showTaskDatosDialog"}}),t._l(t.tasksData,function(e){return a("v-col",{key:e.idPlantillaPasoDetall,attrs:{xs:"12",sm:"6",md:"4",lg:"3",xl:"2",cols:"12"}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"400",hover:""}},[a("v-overlay",{attrs:{"z-index":"4",absolute:"",value:t.overlayStartCondition(e)}},[a("v-btn",{attrs:{outlined:"",color:"white"},on:{click:function(a){t.showTakeitDialog=!0,t.selectedTask=e}}},[t._v("\n                    Iniciar\n                ")])],1),a("v-overlay",{attrs:{"z-index":"4",absolute:"",value:t.overlayApproveCondition(e)}},[a("v-btn",{attrs:{color:"green"}},[t._v("\n                    Aprobado\n                ")])],1),a("v-overlay",{attrs:{"z-index":"4",absolute:"",value:t.overlayRejectCondition(e)}},[a("v-btn",{attrs:{color:"red"}},[t._v("\n                    rechazado\n                ")])],1),a("v-row",{staticClass:"ma-0"},[a("v-card-title",[t._v(t._s(e.nombre))])],1),a("v-card-text",[a("div",{staticClass:"subtitle-1 text--primary"},[t._v("Descripción")]),t._v("\n                    "+t._s(e.descripcion)+"\n                ")]),a("v-list-item",[a("v-list-item-icon",[a("v-btn",{attrs:{icon:""},on:{click:function(){t.showParticipantsDialog=!0,t.selectedTask=e}}},[a("v-icon",[t._v("linear_scale")])],1)],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Participantes")]),a("v-list-item-subtitle",[t._v(t._s(e.usuarios.length))])],1)],1),a("v-list-item",[a("v-list-item-icon",[a("v-btn",{attrs:{icon:""},on:{click:function(){t.showTaskDatosDialog=!0,t.selectedTask=e}}},[a("v-icon",[t._v("list")])],1)],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Cant. de datos")]),a("v-list-item-subtitle",[t._v(t._s(e.datos_Pasos.length))])],1)],1),e.usuarioAccion==t.session_claims.user_id?a("v-card-actions",[a("v-layout",{staticClass:"ma-0",attrs:{row:""}},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on;return[a("v-btn",t._g({attrs:{icon:""},on:{click:function(){t.showApproveDialog=!0,t.selectedTask=e}}},i),[a("v-icon",[t._v("check")])],1)]}}],null,!0)},[a("span",[t._v("Aprobar")])]),a("div",{staticClass:"pl-2"}),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on;return[a("v-btn",t._g({attrs:{icon:""},on:{click:function(){t.showRejectDialog=!0,t.selectedTask=e}}},i),[a("v-icon",[t._v("warning")])],1)]}}],null,!0)},[a("span",[t._v("Rechazar")])]),a("div",{staticClass:"pl-2"}),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on;return[a("v-btn",t._g({attrs:{icon:""},on:{click:function(){t.showReturnDialog=!0,t.selectedTask=e}}},i),[a("v-icon",[t._v("\n                                        keyboard_return\n                                    ")])],1)]}}],null,!0)},[a("span",[t._v("Regresar")])]),a("div",{staticClass:"pl-2"}),e.usuarios.length>1?a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on;return[a("v-btn",t._g({attrs:{icon:""},on:{click:function(){t.showRedirectDialog=!0,t.selectedTask=e}}},i),[a("v-icon",[t._v("\n                                        swap_horiz\n                                    ")])],1)]}}],null,!0)},[a("span",[t._v("Redireccionar")])]):t._e()],1)],1):t._e()],1)],1)})],2):t._e(),a("v-snackbar",{attrs:{color:t.taskSnackbar.style,timeout:t.taskSnackbar.timeout},model:{value:t.taskSnackbar.active,callback:function(e){t.$set(t.taskSnackbar,"active",e)},expression:"taskSnackbar.active"}},[t._v("\n    "+t._s(t.taskSnackbar.text)+"\n        "),a("v-btn",{attrs:{text:""},on:{click:function(e){t.taskSnackbar.active=!1}}},[t._v("\n        Cerrar\n        ")])],1)],1)},Pt=[],Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"300"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-card",[a("v-card-title",[t._v("Datos de la tarea")]),a("v-card-text",{staticClass:"pb-0"},[a("div",{staticClass:"subtitle-1",attrs:{align:"center"}},[t._v(t._s(t.task.nombre))]),a("v-list",t._l(t.task.datos_Pasos,function(e){return a("v-list-item",{key:e.idInstanciaPlantillaDato,staticClass:"pa-0"},[1==e.tipoDato?a("v-text-field",{attrs:{readonly:"1"==e.soloLectura,type:"text",outlined:"",color:"deep-orange",counter:50,label:e.nombreCampo,autocomplete:"off",required:""},model:{value:e.datoString,callback:function(a){t.$set(e,"datoString",a)},expression:"dato.datoString"}}):t._e(),2==e.tipoDato?a("v-text-field",{attrs:{readonly:"1"==e.soloLectura,type:"number",outlined:"",color:"deep-orange",counter:50,label:e.nombreCampo,autocomplete:"off",required:""},model:{value:e.datoInteger,callback:function(a){t.$set(e,"datoInteger",a)},expression:"dato.datoInteger"}}):t._e(),3==e.tipoDato?a("v-dialog",{ref:"inputDateDialog",refInFor:!0,attrs:{disabled:"1"==e.soloLectura,"return-value":e.datoDate,persistent:"","full-width":"",width:"290px"},on:{"update:returnValue":function(a){return t.$set(e,"datoDate",a)},"update:return-value":function(a){return t.$set(e,"datoDate",a)}},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on;return[3==e.tipoDato?a("v-text-field",t._g({attrs:{solo:"",color:"dark",label:e.nombreCampo,readonly:""},model:{value:null!=e.datoDate?e.datoDate=e.datoDate.split("T")[0]:e.datoDate,callback:function(a){t.$set(null!=e.datoDate?e.datoDate=e.datoDate.split("T")[0]:e,"datoDate",a)},expression:"dato.datoDate!=null?dato.datoDate=dato.datoDate.split('T')[0]:dato.datoDate"}},i)):t._e()]}}],null,!0),model:{value:t.inputDateDialog,callback:function(e){t.inputDateDialog=e},expression:"inputDateDialog"}},[a("v-date-picker",{attrs:{color:"orange"},model:{value:e.datoDate,callback:function(a){t.$set(e,"datoDate",a)},expression:"dato.datoDate"}},[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:""},on:{click:function(e){t.inputDateDialog=!1}}},[t._v("Cancel")]),a("v-btn",{attrs:{text:""},on:{click:function(){t.$refs.inputDateDialog[0].save(e.datoDate)}}},[t._v("OK")])],1)],1):t._e()],1)}),1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:function(e){e.stopPropagation(),t.show=!1}}},[t._v("Cerrar")])],1)],1)],1)},$t=[],At={props:{value:Boolean,task:[]},data:()=>({inputDateDialog:!1}),computed:{show:{get(){return this.value},set(t){this.$emit("input",t)}}},methods:{save(){this.show=!1}},created(){console.log(this.arrayDatos)}},Lt=At,Nt=Object(r["a"])(Lt,Ft,$t,!1,null,"80086b8a",null),Rt=Nt.exports;c()(Nt,{VBtn:u["a"],VCard:T["a"],VCardActions:I["a"],VCardText:I["b"],VCardTitle:I["c"],VDatePicker:vt["a"],VDialog:F["a"],VList:h["a"],VListItem:b["a"],VSpacer:f["a"],VTextField:j["a"]});var Ut={data:()=>({showParticipantsDialog:!1,showTaskDatosDialog:!1,session_claims:Object,selectedTask:Object,showTakeitDialog:!1,showApproveDialog:!1,showRejectDialog:!1,showReturnDialog:!1,showRedirectDialog:!1,newUserRedirect:null,confirmOverlay:!0,tasksData:[],isLoaded:!1,loaderCard:null,taskSnackbar:{text:String,active:!1,style:String,timeout:6e3}}),components:{ParticipantsDialog:Q,TaskDatosDialog:Rt},methods:{async loadTasks(){await this.$axios.get(this.$webServicesBaseURL+"Home/Tareas",{withCredentials:!0}).then(t=>{200==t.status&&41==t.data.code&&(this.tasksData=t.data.data)})},async startTask(t){this.loaderCard="deep-orange",await this.$axios.put(this.$webServicesBaseURL+"Home/Tareas/Edit/Start/"+t.idPlantillaPasoDetalle,t,{withCredentials:!0}).then(e=>{200==e.status&&43==e.data.code&&(t.usuarioAccion=e.data.data.usuarioAccion,t.usuarioAccionNavigation=e.data.data.usuarioAccionNavigation,this.showSnackbar(t.nombre,"success",1))}).catch(t=>{null!=t.response&&404==t.response.status&&null!=t.response.data?this.showSnackbar(t.response.data.message,"error",1e3):this.showSnackbar(t,"error",1e3)}),this.loaderCard=!1,this.showTakeitDialog=!1},async approveTask(t){this.loaderCard="deep-orange",await this.$axios.put(this.$webServicesBaseURL+"Home/Tareas/Edit/Approve/"+t.idPlantillaPasoDetalle,t,{withCredentials:!0}).then(e=>{200==e.status&&43==e.data.code&&(console.log(e.data),t.estado=e.data.data.estado,t.estadoNavigation=e.data.data.estadoNavigation,this.showSnackbar(t.nombre,"success",2))}).catch(t=>{null!=t.response&&404==t.response.status&&null!=t.response.data?this.showSnackbar(t.response.data.message,"error",1e3):this.showSnackbar(t,"error",1e3)}),this.loaderCard=!1,this.showApproveDialog=!1},async rejectTask(t){this.loaderCard="deep-orange",await this.$axios.put(this.$webServicesBaseURL+"Home/Tareas/Edit/Reject/"+t.idPlantillaPasoDetalle,t,{withCredentials:!0}).then(e=>{200==e.status&&43==e.data.code&&(console.log(e.data),t.estado=e.data.data.estado,t.estadoNavigation=e.data.data.estadoNavigation,this.showSnackbar(t.nombre,"success",3))}).catch(t=>{null!=t.response&&404==t.response.status&&null!=t.response.data?this.showSnackbar(t.response.data.message,"error",1e3):this.showSnackbar(t,"error",1e3)}),this.loaderCard=!1,this.showRejectDialog=!1},async returnTask(t){this.loaderCard="deep-orange",await this.$axios.put(this.$webServicesBaseURL+"Home/Tareas/Edit/Return/"+t.idPlantillaPasoDetalle,t,{withCredentials:!0}).then(e=>{200==e.status&&43==e.data.code&&(console.log(e.data),t.estado=e.data.data.estado,t.estadoNavigation=e.data.data.estadoNavigation,t.usuarioAccion=null,t.usuarioAccionNavigation=null,this.showSnackbar(t.nombre,"success",4))}).catch(t=>{null!=t.response&&404==t.response.status&&null!=t.response.data?this.showSnackbar(t.response.data.message,"error",1e3):this.showSnackbar(t,"error",1e3)}),this.loaderCard=!1,this.showReturnDialog=!1},async redirectTask(t){this.$refs.newUserRedirect.validate()&&(this.loaderCard="deep-orange",await this.$axios.put(this.$webServicesBaseURL+"Home/Tareas/Edit/Redirect/"+t.idPlantillaPasoDetalle,{idPlantillaPasoDetalle:t.idPlantillaPasoDetalle,idPasoinstancia:t.idPasoinstancia,instanciaPlantilla:t.instanciaPlantilla,nombre:t.nombre,descripcion:t.descripcion,fechaInicio:t.fechaInicio,fechaFin:t.fechaFin,estado:t.estado,estadoNavigation:t.estadoNavigation,usuarioAccion:this.newUserRedirect.idUsuario,usuarioAccionNavigation:this.newUserRedirect,usuarios:t.usuarios,datos_Pasos:t.datos_Pasos},{withCredentials:!0}).then(e=>{200==e.status&&43==e.data.code&&(console.log(e.data),t.estado=e.data.data.estado,t.estadoNavigation=e.data.data.estadoNavigation,t.usuarioAccion=e.data.data.usuarioAccion,t.usuarioAccionNavigation=e.data.data.usuarioAccionNavigation,this.$refs.newUserRedirect.reset(),this.showSnackbar(t.nombre,"success",5))}).catch(t=>{null!=t.response&&404==t.response.status&&null!=t.response.data?this.showSnackbar(t.response.data.message,"error",1e3):this.showSnackbar(t,"error",1e3)}),this.loaderCard=!1,this.showRedirectDialog=!1)},overlayStartCondition(t){return null==t.usuarioAccion},overlayApproveCondition(t){return null!=t.estadoNavigation&&"Aprobar"==t.estadoNavigation.nombre|"Aprobado"==t.estadoNavigation.nombre},overlayRejectCondition(t){return null!=t.estadoNavigation&&"Rechazar"==t.estadoNavigation.nombre|"Rechazado"==t.estadoNavigation.nombre},showSnackbar(t,e,a){switch(this.taskSnackbar.active=!1,a){case 1:this.taskSnackbar.text='Tarea "'+t+'" iniciado.';break;case 2:this.taskSnackbar.text='Tarea "'+t+'" aprobada.';break;case 3:this.taskSnackbar.text='Tarea "'+t+'" rechazada.';break;case 4:this.taskSnackbar.text='Tarea "'+t+'" regresada.';break;case 5:this.taskSnackbar.text='Tarea "'+t+'" redireccionada.';break;default:this.taskSnackbar.text=t;break}this.taskSnackbar.active=!0,this.taskSnackbar.style=e},async initializeAll(){await this.loadTasks(),this.isLoaded=!0}},created(){this.initializeAll()},mounted(){this.session_claims=JSON.parse(atob(this.$cookies.get("session_token").split(".")[1]))}},Ot=Ut,jt=a("a797"),Et=a("3a2f"),Bt=Object(r["a"])(Ot,It,Pt,!1,null,"4f7f6e97",null),zt=Bt.exports;c()(Bt,{VApp:d["a"],VBtn:u["a"],VCard:T["a"],VCardActions:I["a"],VCardText:I["b"],VCardTitle:I["c"],VCol:P["a"],VDialog:F["a"],VForm:A["a"],VIcon:m["a"],VLayout:L["a"],VListItem:b["a"],VListItemContent:g["a"],VListItemIcon:N["a"],VListItemSubtitle:g["b"],VListItemTitle:g["c"],VOverlay:jt["a"],VProgressCircular:R["a"],VRow:w["a"],VSelect:U["a"],VSnackbar:O["a"],VSpacer:f["a"],VTooltip:Et["a"]});var qt={data:()=>({tab1:"myProcess",sections:[{id:1,title:"Mis procesos",href:"#myProcess"},{id:2,title:"Procesos",href:"#process"},{id:3,title:"Mis tareas",href:"#myTasks"}]}),components:{MyProcessPage:ft,AllProcessPage:yt,TasksPage:zt}},Ht=qt,Mt=a("71a3"),Wt=a("c671"),Gt=a("fe57"),Jt=a("aac8"),Kt=a("9a96"),Yt=Object(r["a"])(Ht,Vt,Tt,!1,null,"195dd95f",null),Qt=Yt.exports;c()(Yt,{VApp:d["a"],VAppBar:p["a"],VAppBarNavIcon:v["a"],VBtn:u["a"],VIcon:m["a"],VList:h["a"],VListItem:b["a"],VListItemTitle:g["c"],VMenu:_["a"],VSpacer:f["a"],VTab:Mt["a"],VTabItem:Wt["a"],VTabs:Gt["a"],VTabsItems:Jt["a"],VTabsSlider:Kt["a"],VToolbarTitle:D["a"]});var Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"",fullscreen:"","hide-overlay":"",transition:"scale-transition"},on:{"click:outside":function(e){return t.hola()}},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[a("v-card",[a("v-app",[a("v-app-bar",{attrs:{color:"deep-orange",flat:"",fixed:""}},[a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.closeActivity()}}},[a("v-icon",[t._v("arrow_back")])],1),a("v-toolbar-title",{staticClass:"headline"},[t._v("Proceso")]),a("div",{staticClass:"flex-grow-1"})],1),t.isLoaded?t._e():a("div",{staticClass:"body"},[t.isLoaded?t._e():a("v-row",{staticClass:"pa-0 ma-0",attrs:{align:"center"}},[a("v-col",{attrs:{align:"center"}},[a("v-progress-circular",{attrs:{size:70,width:7,color:"deep-orange",indeterminate:""}})],1)],1)],1),t.isLoaded?a("div",{staticClass:"body2"},[a("v-row",{staticClass:"pa-1"}),a("v-row",{staticClass:"headline text--secondary",attrs:{justify:"center"}},[t._v("Estados del paso/proceso")]),a("v-row",{attrs:{justify:"center"}},t._l(t.statusIcons,function(e,s){return a("div",{key:s,staticClass:"statusIcon_item"},[a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("\n                        "+t._s(e.icon)+"\n                    ")])],1),t._v("\n                "+t._s(e.text)+"\n                "),a("div",{staticClass:"pl-4"})],1)}),0),a("v-row",{staticClass:"pa-3"}),a("v-divider",{staticClass:"mx-4"}),a("v-row",{staticClass:"pa-3"}),a("v-row",{staticClass:"headline text--secondary",attrs:{justify:"center"}},[t._v("Detalles y estado del proceso")]),a("v-row",{staticClass:"pa-1"}),a("v-row",{staticClass:"pl-2 pr-2 pt-2",attrs:{justify:t.localWidth>=960?"center":"left"}},[a("DatosDialog",{attrs:{arrayDatos:t.processData.datos},model:{value:t.showDatosDialog,callback:function(e){t.showDatosDialog=e},expression:"showDatosDialog"}}),a("v-card",{attrs:{"max-width":"300"}},[a("v-card-title",[t._v(t._s(t.processData.nombre))]),a("v-card-text",{staticClass:"pb-0 pt-4"},[a("div",{staticClass:"subtitle-1 text--primary"},[t._v("Descripción")]),t._v("\n                    "+t._s(t.processData.descripcion)+"\n                ")]),a("v-list-item",[a("v-list-item-icon",[a("v-btn",{attrs:{icon:""},on:{click:function(e){t.showDatosDialog=!0}}},[a("v-icon",[t._v("\n                                list\n                            ")])],1)],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Cantidad de datos")]),a("v-list-item-subtitle",[t._v(t._s(t.processData.datos.length))])],1)],1),a("v-list-item",[a("v-list-item-icon",[a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("\n                                linear_scale\n                            ")])],1)],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Pasos aprobados")]),a("v-list-item-subtitle",[t._v(t._s(t.processData.pasos.filter(function(t){return 1==t.estado}).length)+"/"+t._s(t.processData.pasos.length))])],1)],1),a("v-row",{staticClass:"pa-0 ma-0",attrs:{justify:"end"}},["0"==t.processData.iniciada&&"0"==t.processData.estado?a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("\n                            info\n                        ")])],1):t._e(),"1"==t.processData.iniciada&&"0"==t.processData.estado?a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("\n                            brightness_1\n                        ")])],1):t._e(),"1"==t.processData.iniciada&&"1"==t.processData.estado?a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("\n                            check\n                        ")])],1):t._e()],1)],1)],1),a("ParticipantsDialog",{attrs:{step:t.selectedStep,from:"paso"},model:{value:t.showParticipantsDialog,callback:function(e){t.showParticipantsDialog=e},expression:"showParticipantsDialog"}}),a("v-timeline",{attrs:{dense:t.$vuetify.breakpoint.smAndDown}},t._l(t.processData.pasos,function(e,s){return a("v-timeline-item",{key:e.idPlantillaPasoDetalle,attrs:{color:e.color=t.colorsArray[Math.floor(Math.random()*t.colorsArray.length)],"fill-dot":"",right:s%2==0,left:s%2==1},scopedSlots:t._u([{key:"icon",fn:function(){return[null==e.estado&&null==e.usuarioAccion?a("v-icon",[t._v("info")]):t._e(),null==e.estado&&null!=e.usuarioAccion?a("v-icon",[t._v("brightness_1")]):t._e(),1==e.estado&&null!=e.usuarioAccion?a("v-icon",[t._v("check")]):t._e(),21==e.estado&&null!=e.usuarioAccion?a("v-icon",[t._v("warning")]):t._e(),22==e.estado&&null==e.usuarioAccion?a("v-icon",[t._v("keyboard_return")]):t._e(),23==e.estado&&null!=e.usuarioAccion?a("v-icon",[t._v("swap_horiz")]):t._e()]},proxy:!0}],null,!0)},[a("v-card",[a("v-card-title",{class:e.color},[a("h2",{staticClass:"display-1 light--text"},[t._v(t._s(e.nombre))])]),a("v-row",{staticClass:"pa-1"}),null!=e.fechaInicio?a("v-row",{staticClass:"pl-3 pr-3 ma-0"},[a("div",{staticClass:"body-2 text--secondary"},[t._v(t._s(t.getDatetimeParsed(e.fechaInicio))+" inicio")])]):t._e(),a("v-row",[a("v-col",{staticClass:"pa-0"},[a("v-list-item",[a("v-list-item-icon",[a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("\n                                        receipt\n                                    ")])],1)],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Descripción")]),a("v-list-item-subtitle",[t._v(t._s(e.descripcion))])],1)],1)],1),a("v-col",{staticClass:"pa-0"},[a("v-list-item",[a("v-list-item-icon",[a("v-btn",{attrs:{icon:""},on:{click:function(a){t.showParticipantsDialog=!0,t.selectedStep=e}}},[a("v-icon",[t._v("\n                                        people\n                                    ")])],1)],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Participantes")]),a("v-list-item-subtitle",[t._v(t._s(e.usuarios.length))])],1)],1)],1)],1),null!=e.fechaFin?a("v-row",{staticClass:"pl-3 pr-3 ma-0"},[a("v-spacer"),a("div",{staticClass:"body-2 text--secondary"},[t._v(t._s(t.getDatetimeParsed(e.fechaFin))+" fin")])],1):t._e()],1)],1)}),1)],1):t._e(),a("v-snackbar",{attrs:{color:t.processSnackbar.style,timeout:t.processSnackbar.timeout},model:{value:t.processSnackbar.active,callback:function(e){t.$set(t.processSnackbar,"active",e)},expression:"processSnackbar.active"}},[t._v("\n      "+t._s(t.processSnackbar.text)+"\n          "),a("v-btn",{attrs:{text:""},on:{click:function(e){t.processSnackbar.active=!1}}},[t._v("\n          Cerrar\n          ")])],1)],1)],1)],1)},Zt=[],te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"300"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-card",[a("v-card-title",[t._v("Datos del proceso")]),a("v-card-text",{staticClass:"pb-0"},[a("v-list",t._l(t.arrayDatos,function(e){return a("v-list-item",{key:e.idInstanciaPlantillaDato,staticClass:"pa-0"},[1==e.tipoDato?a("v-text-field",{attrs:{readonly:"",type:"text",outlined:"",color:"deep-orange",counter:50,label:e.nombreCampo,autocomplete:"off",required:""},model:{value:e.datoString,callback:function(a){t.$set(e,"datoString",a)},expression:"dato.datoString"}}):t._e(),2==e.tipoDato?a("v-text-field",{attrs:{readonly:"",type:"number",outlined:"",color:"deep-orange",counter:50,label:e.nombreCampo,autocomplete:"off",required:""},model:{value:e.datoInteger,callback:function(a){t.$set(e,"datoInteger",a)},expression:"dato.datoInteger"}}):t._e(),3==e.tipoDato?a("v-text-field",{attrs:{readonly:"",outlined:"",color:"deep-orange",counter:50,label:e.nombreCampo,autocomplete:"off",required:""},model:{value:null!=e.datoDate?e.datoDate.split("T")[0]:e.datoDate,callback:function(a){t.$set(null!=e.datoDate?e.datoDate.split("T")[0]:e,"datoDate",a)},expression:"dato.datoDate!=null?dato.datoDate.split('T')[0]:dato.datoDate"}}):t._e()],1)}),1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:function(e){e.stopPropagation(),t.show=!1}}},[t._v("Cerrar")])],1)],1)],1)},ee=[],ae={props:{value:Boolean,arrayDatos:[]},computed:{show:{get(){return this.value},set(t){this.$emit("input",t)}}}},se=ae,ie=Object(r["a"])(se,te,ee,!1,null,"557734e8",null),oe=ie.exports;c()(ie,{VBtn:u["a"],VCard:T["a"],VCardActions:I["a"],VCardText:I["b"],VCardTitle:I["c"],VDialog:F["a"],VList:h["a"],VListItem:b["a"],VSpacer:f["a"],VTextField:j["a"]});var ne={data:()=>({colorsArray:["pink lighten-1","blue lighten-1","purple lighten-2","amber","cyan lighten-1","red lighten-1","green lighten-1","deep-orange lighten-1","teal lighten-1"],statusIcons:[{icon:"info",text:"Pendiente de iniciar"},{icon:"brightness_1",text:"En curso"},{icon:"check",text:"Aprobado/terminado"},{icon:"warning",text:"Rechazado"},{icon:"keyboard_return",text:"Regresado"},{icon:"swap_horiz",text:"Redireccionado"}],showDatosDialog:!1,showParticipantsDialog:!1,selectedStep:Object,processData:Object,localWidth:window.innerWidth,opened:!1,isLoaded:!1,onlyNestedDialogs:!0,processSnackbar:{style:String,active:!1,timeout:6e3,text:String}}),components:{DatosDialog:oe,ParticipantsDialog:Q},methods:{async loadProcess(){await this.$axios.get(this.$webServicesBaseURL+"Home/InstanciasPlantillas/Details/"+this.$route.params.idInstanciaPlantilla,{withCredentials:!0}).then(t=>{200==t.status&&21==t.data.code&&(this.processData=t.data.data)}).catch(t=>{null!=t.response&&404==t.response.status&&null!=t.response.data?this.showSnackbar(t.response.data.message,"error",1e3):this.showSnackbar(t,"error",1e3)})},closeActivity(){this.opened=!1,this.$emit("close"),this.$router.go(-1)},hola(){this.onlyNestedDialogs||(this.opened=!1,this.$emit("close"),this.$router.go(-1))},showSnackbar(t,e,a){switch(this.processSnackbar.active=!1,a){case 1:this.processSnackbar.text='Proceso "'+t+'" iniciado.';break;case 2:this.processSnackbar.text='Proceso "'+t+'" eliminado.';break;default:this.processSnackbar.text=t;break}this.processSnackbar.active=!0,this.processSnackbar.style=e},getDatetimeParsed(t){var e=new Date(t);return e.getDate()+" "+e.toLocaleString("default",{month:"long"}).substring(0,3)+" "+e.getUTCFullYear()+" "+t.split("T")[1]},async initializeAll(){await this.loadProcess(),this.isLoaded=!0}},created(){this.initializeAll()},mounted(){this.opened=!0,window.onresize=()=>{this.localWidth=window.innerWidth}}},re=ne,le=(a("ffd8"),a("8414")),ce=a("1e06"),de=Object(r["a"])(re,Xt,Zt,!1,null,"cc2e516e",null),pe=de.exports;c()(de,{VApp:d["a"],VAppBar:p["a"],VBtn:u["a"],VCard:T["a"],VCardText:I["b"],VCardTitle:I["c"],VCol:P["a"],VDialog:F["a"],VDivider:nt["a"],VIcon:m["a"],VListItem:b["a"],VListItemContent:g["a"],VListItemIcon:N["a"],VListItemSubtitle:g["b"],VListItemTitle:g["c"],VProgressCircular:R["a"],VRow:w["a"],VSnackbar:O["a"],VSpacer:f["a"],VTimeline:le["a"],VTimelineItem:ce["a"],VToolbarTitle:D["a"]});var ve=a("2b0e"),ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-navigation-drawer",{attrs:{floating:"","expand-on-hover":t.isOpen,"disable-resize-watcher":"true","disable-route-watcher":"true",permanent:t.isOpen,height:"100%",app:""},model:{value:t.isActive,callback:function(e){t.isActive=e},expression:"isActive"}},[a("v-list",{attrs:{shaped:""}},[a("v-list-item",{attrs:{"two-line":""}},[a("v-list-item-content",{attrs:{align:"center"}},[a("v-list-item-title",{staticClass:"headline uppercase"},[t._v("Proyecto Seminario")])],1)],1),a("v-divider",{staticClass:"mx-2",attrs:{inset:t.inset}}),a("v-list-item",[a("v-list-item-avatar",{attrs:{size:"50"}},[a("v-img",{attrs:{src:t.userInfo.userProfileImg}})],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.userInfo.userName))]),a("v-spacer"),a("v-list-item-subtitle",[t._v(t._s(t.userInfo.userEmail))])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-subtitle",{attrs:{align:"center"}},[t._v(t._s(1==t.userInfo.userLevel?"Administrador":"Estándar"))])],1)],1),a("v-divider",{staticClass:"mx-2",attrs:{inset:t.inset}}),a("v-row",{staticClass:"pa-2"}),t._l(t.routes,function(e){return a("v-list-item",{key:e.title,attrs:{link:"",to:e.link,"active-class":"deep-orange white--text"},on:{click:function(e){t.isActive=!t.isActive}}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.title))])],1)],1)}),t._l(t.multiLevelRoutes,function(e){return a("v-list-group",{key:e.title,attrs:{"prepend-icon":e.icon,color:"white"},scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-list-item-title",[t._v(t._s(e.title))])]},proxy:!0}],null,!0)},t._l(e.childs,function(e){return a("v-list-item",{key:e.title,attrs:{link:"",to:e.link,"active-class":"deep-orange white--text"},on:{click:function(e){t.isActive=!t.isActive}}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.title))])],1)],1)}),1)}),a("v-row",{staticClass:"pa-2"}),a("v-divider",{staticClass:"mx-2",attrs:{inset:t.inset}}),a("v-subheader",[t._v("Cuenta")]),a("v-list-item",{attrs:{link:""},on:{click:function(e){t.isActive=!t.isActive,t.dialog=!0}}},[a("v-list-item-icon",[a("v-icon",[t._v("exit_to_app")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Cerrar sesión")])],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Confirmación")]),a("v-card-text",[t._v("\n            Desea cerrar sesión ?\n          ")]),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{text:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n              No\n            ")]),a("v-btn",{attrs:{text:""},on:{click:function(e){return t.log_out()}}},[t._v("\n              Si\n            ")])],1)],1)],1)],2)],1),a("v-content",[a("v-container",{attrs:{fluid:""}},[a("transition",{attrs:{name:"fade-transition"}},[a("router-view",{on:{openClose:t.openCloseDrawer}})],1)],1)],1)],1)},me=[],he={name:"App",data:()=>({userInfo:{userProfileImg:String,userName:String,userEmail:String,userLevel:String},routes:[{title:"Inicio",icon:"home",link:"/Inicio"},{title:"Usuarios",icon:"people",link:"/Usuarios"},{title:"Plantillas",icon:"grid_on",link:"/Plantillas"},{title:"Actividades",icon:"dashboard",link:"/Actividades"}],globalWidth:window.innerWidth,isOpen:!0,isActive:!0,dialog:!1}),created(){this.globalWidth=window.innerWidth,this.globalWidth<650?this.isOpen=!1:this.isOpen=!0},destroyed(){},beforeCreate(){},methods:{openCloseDrawer(){this.isActive,this.isActive=!this.isActive},log_out(){this.$axios.get("https://localhost:44354/Home/Log_out",{withCredentials:!0}).then(t=>{document.location.reload(!0)}),this.dialog=!1}},mounted(){var t=JSON.parse(atob(this.$cookies.get("oauth_session_token").split(".")[1])),e=JSON.parse(atob(this.$cookies.get("session_token").split(".")[1]));this.userInfo.userProfileImg=t.picture,this.userInfo.userName=e.user_name,this.userInfo.userEmail=t.email,this.userInfo.userLevel=e.user_level,window.onresize=()=>{this.globalWidth=window.innerWidth,this.globalWidth<650?this.isOpen=!1:this.isOpen=!0}}},be=he,ge=a("a523"),_e=a("a75b"),we=a("adda"),fe=a("56b0"),De=a("8270"),ke=a("f774"),Ce=a("e0c7"),Se=Object(r["a"])(be,ue,me,!1,null,null,null),xe=Se.exports;c()(Se,{VApp:d["a"],VBtn:u["a"],VCard:T["a"],VCardActions:I["a"],VCardText:I["b"],VCardTitle:I["c"],VContainer:ge["a"],VContent:_e["a"],VDialog:F["a"],VDivider:nt["a"],VIcon:m["a"],VImg:we["a"],VList:h["a"],VListGroup:fe["a"],VListItem:b["a"],VListItemAvatar:De["a"],VListItemContent:g["a"],VListItemIcon:N["a"],VListItemSubtitle:g["b"],VListItemTitle:g["c"],VNavigationDrawer:ke["a"],VRow:w["a"],VSpacer:f["a"],VSubheader:Ce["a"]});var ye=a("f309");a("5363");ve["a"].use(ye["a"]);var Ve=new ye["a"]({icons:{iconfont:"mdi"}}),Te=a("2b27"),Ie=a.n(Te),Pe=a("bc3a"),Fe=a.n(Pe),$e=a("a7fe"),Ae=a.n($e),Le=a("8c4f");ve["a"].config.productionTip=!1,ve["a"].use(Ie.a),ve["a"].use(Ae.a,Fe.a),ve["a"].use(Le["a"]);const Ne=new Le["a"]({base:"/Home/",routes:[{path:"/",redirect:"Inicio"},{path:"/Inicio",component:C,name:"Inicio"},{path:"/Usuarios",component:B,name:"Usuarios"},{path:"/Plantillas",component:mt,name:"Plantillas",children:[{path:"Detalle/:idPlantilla",component:lt,name:"Plantilla"}]},{path:"/Actividades",component:Qt,name:"Actividades"},{path:"/Procesos",component:ft,name:"Mis procesos",children:[{path:"Detalle/:idInstanciaPlantilla",component:pe,name:"Proceso"}]},{path:"/ListaProcesos",component:yt,name:"Procesos"},{path:"/Tareas",component:zt,name:"Mis tareas"}]});new ve["a"]({vuetify:Ve,router:Ne,render:t=>t(xe),beforeCreate(){this.$vuetify.theme.dark=!0,ve["a"].prototype.$webServicesBaseURL="https://localhost:44354/",ve["a"].prototype.$axios=Fe.a,ve["a"].prototype.$drawerState=!1,ve["a"].prototype.$app_bar_actions=[{index:1,title:"Ajustes"},{index:2,title:"Acerca de..."}]}}).$mount("#app")},"6cba":function(t,e,a){"use strict";var s=a("6db2"),i=a.n(s);i.a},"6db2":function(t,e,a){},d438:function(t,e,a){},e20c:function(t,e,a){"use strict";var s=a("359b"),i=a.n(s);i.a},ffd8:function(t,e,a){"use strict";var s=a("d438"),i=a.n(s);i.a}});
//# sourceMappingURL=app.9064c0d2.js.map